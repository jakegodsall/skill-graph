import{r as i,R as e,H as C,a as H}from"./app-C9IywKP_.js";import{A as S,G as k}from"./app-layout-ChxqXliJ.js";import{C as K,a as X,b as _,c as $,B as z}from"./badge-Agn9lkz4.js";import{B as c}from"./app-logo-icon-B0OBywsz.js";import{D as w,a as J,b,c as D,d as F}from"./dialog-CgHwolzY.js";import{L as m,I as d}from"./label-BwIqde0w.js";import{T,S as U,a as W}from"./textarea-CVkewbj2.js";import{P as j}from"./plus-N4-pP3fA.js";/* empty css            */import"./index-D6Fp34Bh.js";import"./index-DRN7Jx4a.js";function ce(){const[y,E]=i.useState([]),[B,O]=i.useState(!0),[M,f]=i.useState(!1),[A,h]=i.useState(!1),[v,x]=i.useState(null),[s,g]=i.useState({name:"",description:"",color:"#3B82F6"}),[r,p]=i.useState({}),P=async()=>{try{const l=await(await fetch("/api/skills")).json();E(l)}catch(t){console.error("Error fetching skills:",t)}finally{O(!1)}};i.useEffect(()=>{P()},[]);const o=(t,l)=>{g(a=>({...a,[t]:l})),r[t]&&p(a=>({...a,[t]:""}))},q=async t=>{var l;t.preventDefault(),p({});try{const a=await fetch("/api/skills",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify(s)});if(a.ok){const n=await a.json();E(u=>[...u,n]),f(!1),g({name:"",description:"",color:"#3B82F6"})}else{const n=await a.json();n.errors&&p(n.errors)}}catch(a){console.error("Error creating skill:",a)}},L=async t=>{var l;if(t.preventDefault(),!!v){p({});try{const a=await fetch(`/api/skills/${v.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify(s)});if(a.ok){const n=await a.json();E(u=>u.map(N=>N.id===v.id?n:N)),h(!1),x(null),g({name:"",description:"",color:"#3B82F6"})}else{const n=await a.json();n.errors&&p(n.errors)}}catch(a){console.error("Error updating skill:",a)}}},G=async t=>{var l;if(confirm(`Are you sure you want to delete "${t.name}"? This will also delete all associated activities.`))try{(await fetch(`/api/skills/${t.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""}})).ok&&E(n=>n.filter(u=>u.id!==t.id))}catch(a){console.error("Error deleting skill:",a)}},I=t=>{x(t),g({name:t.name,description:t.description||"",color:t.color}),h(!0)},R=()=>{H.visit("/skill-graph")};return B?e.createElement(S,null,e.createElement(C,{title:"Skills Management"}),e.createElement("div",{className:"flex items-center justify-center h-64"},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}))):e.createElement(S,null,e.createElement(C,{title:"Skills Management"}),e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Skills Management"),e.createElement("p",{className:"text-gray-600"},"Manage your skills and learning domains")),e.createElement("div",{className:"flex items-center space-x-4"},e.createElement(c,{onClick:R,variant:"outline"},e.createElement(k,{className:"w-4 h-4 mr-2"}),"View Skill Graph"),e.createElement(w,{open:M,onOpenChange:f},e.createElement(J,{asChild:!0},e.createElement(c,null,e.createElement(j,{className:"w-4 h-4 mr-2"}),"Add Skill")),e.createElement(b,null,e.createElement(D,null,e.createElement(F,null,"Create New Skill")),e.createElement("form",{onSubmit:q,className:"space-y-4"},e.createElement("div",null,e.createElement(m,{htmlFor:"name"},"Name"),e.createElement(d,{id:"name",value:s.name,onChange:t=>o("name",t.target.value),placeholder:"e.g., Python, Web Development",required:!0}),r.name&&e.createElement("p",{className:"text-sm text-red-600"},r.name)),e.createElement("div",null,e.createElement(m,{htmlFor:"description"},"Description"),e.createElement(T,{id:"description",value:s.description,onChange:t=>o("description",t.target.value),placeholder:"Brief description of this skill...",rows:3}),r.description&&e.createElement("p",{className:"text-sm text-red-600"},r.description)),e.createElement("div",null,e.createElement(m,{htmlFor:"color"},"Color"),e.createElement("div",{className:"flex items-center space-x-2"},e.createElement(d,{id:"color",type:"color",value:s.color,onChange:t=>o("color",t.target.value),className:"w-16 h-10"}),e.createElement(d,{value:s.color,onChange:t=>o("color",t.target.value),placeholder:"#3B82F6",className:"flex-1"})),r.color&&e.createElement("p",{className:"text-sm text-red-600"},r.color)),e.createElement("div",{className:"flex justify-end space-x-2"},e.createElement(c,{type:"button",variant:"outline",onClick:()=>f(!1)},"Cancel"),e.createElement(c,{type:"submit"},"Create Skill"))))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},y.map(t=>e.createElement(K,{key:t.id,className:"hover:shadow-lg transition-shadow"},e.createElement(X,{className:"pb-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center space-x-3"},e.createElement("div",{className:"w-5 h-5 rounded-full",style:{backgroundColor:t.color}}),e.createElement(_,{className:"text-lg"},t.name)),e.createElement("div",{className:"flex items-center space-x-2"},e.createElement(c,{size:"sm",variant:"outline",onClick:()=>I(t)},e.createElement(U,{className:"w-4 h-4"})),e.createElement(c,{size:"sm",variant:"outline",onClick:()=>G(t)},e.createElement(W,{className:"w-4 h-4"}))))),e.createElement($,null,e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"text-sm text-gray-600"},"Activities"),e.createElement(z,{variant:"secondary"},t.activities_count)),t.description&&e.createElement("p",{className:"text-sm text-gray-600 line-clamp-2"},t.description),e.createElement("div",{className:"text-xs text-gray-500"},"Created: ",new Date(t.created_at).toLocaleDateString())))))),e.createElement(w,{open:A,onOpenChange:h},e.createElement(b,null,e.createElement(D,null,e.createElement(F,null,"Edit Skill")),e.createElement("form",{onSubmit:L,className:"space-y-4"},e.createElement("div",null,e.createElement(m,{htmlFor:"edit-name"},"Name"),e.createElement(d,{id:"edit-name",value:s.name,onChange:t=>o("name",t.target.value),placeholder:"e.g., Python, Web Development",required:!0}),r.name&&e.createElement("p",{className:"text-sm text-red-600"},r.name)),e.createElement("div",null,e.createElement(m,{htmlFor:"edit-description"},"Description"),e.createElement(T,{id:"edit-description",value:s.description,onChange:t=>o("description",t.target.value),placeholder:"Brief description of this skill...",rows:3}),r.description&&e.createElement("p",{className:"text-sm text-red-600"},r.description)),e.createElement("div",null,e.createElement(m,{htmlFor:"edit-color"},"Color"),e.createElement("div",{className:"flex items-center space-x-2"},e.createElement(d,{id:"edit-color",type:"color",value:s.color,onChange:t=>o("color",t.target.value),className:"w-16 h-10"}),e.createElement(d,{value:s.color,onChange:t=>o("color",t.target.value),placeholder:"#3B82F6",className:"flex-1"})),r.color&&e.createElement("p",{className:"text-sm text-red-600"},r.color)),e.createElement("div",{className:"flex justify-end space-x-2"},e.createElement(c,{type:"button",variant:"outline",onClick:()=>h(!1)},"Cancel"),e.createElement(c,{type:"submit"},"Update Skill"))))),y.length===0&&e.createElement("div",{className:"text-center py-12"},e.createElement(k,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No skills yet"),e.createElement("p",{className:"text-gray-600 mb-4"},"Get started by creating your first skill"),e.createElement(c,{onClick:()=>f(!0)},e.createElement(j,{className:"w-4 h-4 mr-2"}),"Create Your First Skill"))))}export{ce as default};
