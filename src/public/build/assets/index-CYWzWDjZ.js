import{r as m,R as e,H as I,a as j}from"./app-CCnqF8J5.js";import{A as O,T as V,a as ae}from"./app-layout-_2JAvOte.js";import{C as le,a as ne,b as re,c as se,B as P}from"./badge-Dg1Xuo_p.js";import{B as o}from"./app-logo-icon-l3mS74g0.js";import{D as $,a as ce,b as B,c as M,d as R}from"./dialog-DQf0tui3.js";import{L as c,I as d}from"./label-DCp-J0b5.js";import{T as H,S as ie,a as oe}from"./textarea-dakZSJiS.js";import{S as E,a as h,b as g,c as v,C as me,F as de,Z as ue,d as f}from"./select-CfYv0gkY.js";import{P as L}from"./plus-D8KKkvp4.js";import{B as pe,E as Ee}from"./external-link-Dvj7coiI.js";/* empty css            */import"./index-DyvQHXcf.js";import"./index-ByH0b5iH.js";import"./index-AZeenubD.js";const S=[{value:"course",label:"Course",icon:pe,color:"text-blue-600"},{value:"project",label:"Project",icon:me,color:"text-green-600"},{value:"book",label:"Book",icon:de,color:"text-orange-600"},{value:"practice",label:"Practice",icon:V,color:"text-purple-600"},{value:"certification",label:"Certification",icon:ae,color:"text-yellow-600"},{value:"other",label:"Other",icon:ue,color:"text-indigo-600"}],A=[{value:"not_started",label:"Not Started",color:"bg-gray-100 text-gray-800"},{value:"in_progress",label:"In Progress",color:"bg-blue-100 text-blue-800"},{value:"completed",label:"Completed",color:"bg-green-100 text-green-800"},{value:"paused",label:"Paused",color:"bg-yellow-100 text-yellow-800"}];function Fe(){const[u,k]=m.useState([]),[x,q]=m.useState([]),[U,z]=m.useState(!0),[K,C]=m.useState(!1),[X,_]=m.useState(!1),[p,F]=m.useState(null),[a,w]=m.useState({name:"",description:"",type:"course",status:"not_started",url:"",estimated_hours:"",actual_hours:"",skill_id:"",dependencies:[]}),[y,N]=m.useState({}),G=async()=>{try{const[t,n]=await Promise.all([fetch("/api/activities"),fetch("/api/skills")]),[l,r]=await Promise.all([t.json(),n.json()]);k(l),q(r)}catch(t){console.error("Error fetching data:",t)}finally{z(!1)}};m.useEffect(()=>{G()},[]);const s=(t,n)=>{w(l=>({...l,[t]:n})),y[t]&&N(l=>({...l,[t]:""}))},J=async t=>{var l;t.preventDefault(),N({});const n={name:a.name,description:a.description||null,type:a.type,status:a.status,url:a.url||null,estimated_hours:a.estimated_hours?parseInt(a.estimated_hours):null,actual_hours:a.actual_hours?parseInt(a.actual_hours):null,skill_id:parseInt(a.skill_id),dependencies:a.dependencies.length>0?a.dependencies.map(r=>parseInt(r)):[]};try{const r=await fetch("/api/activities",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify(n)});if(r.ok){const i=await r.json();k(b=>[...b,i]),C(!1),D()}else{const i=await r.json();i.errors&&N(i.errors)}}catch(r){console.error("Error creating activity:",r)}},Y=async t=>{var l;if(t.preventDefault(),!p)return;N({});const n={name:a.name,description:a.description||null,type:a.type,status:a.status,url:a.url||null,estimated_hours:a.estimated_hours?parseInt(a.estimated_hours):null,actual_hours:a.actual_hours?parseInt(a.actual_hours):null,skill_id:parseInt(a.skill_id),dependencies:a.dependencies.length>0?a.dependencies.map(r=>parseInt(r)):[]};try{const r=await fetch(`/api/activities/${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify(n)});if(r.ok){const i=await r.json();k(b=>b.map(T=>T.id===p.id?i:T)),_(!1),F(null),D()}else{const i=await r.json();i.errors&&N(i.errors)}}catch(r){console.error("Error updating activity:",r)}},Z=async t=>{var n;if(confirm(`Are you sure you want to delete "${t.name}"?`))try{(await fetch(`/api/activities/${t.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""}})).ok&&k(r=>r.filter(i=>i.id!==t.id))}catch(l){console.error("Error deleting activity:",l)}},D=()=>{w({name:"",description:"",type:"course",status:"not_started",url:"",estimated_hours:"",actual_hours:"",skill_id:"",dependencies:[]})},Q=t=>{var n,l;F(t),w({name:t.name,description:t.description||"",type:t.type,status:t.status,url:t.url||"",estimated_hours:((n=t.estimated_hours)==null?void 0:n.toString())||"",actual_hours:((l=t.actual_hours)==null?void 0:l.toString())||"",skill_id:t.skill_id.toString(),dependencies:t.depends_on.map(r=>r.id.toString())}),_(!0)},W=t=>S.find(l=>l.value===t)||S[0],ee=t=>{const n=A.find(l=>l.value===t);return(n==null?void 0:n.color)||"bg-gray-100 text-gray-800"},te=()=>{if(!p)return u;const t=new Set([p.id]),n=l=>{u.filter(i=>i.depends_on.some(b=>b.id===l)).forEach(i=>{t.has(i.id)||(t.add(i.id),n(i.id))})};return n(p.id),u.filter(l=>!t.has(l.id))};return U?e.createElement(O,null,e.createElement(I,{title:"Activities Management"}),e.createElement("div",{className:"flex items-center justify-center h-64"},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}))):e.createElement(O,null,e.createElement(I,{title:"Activities Management"}),e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Activities Management"),e.createElement("p",{className:"text-gray-600"},"Manage your learning activities and track progress")),e.createElement("div",{className:"flex items-center space-x-4"},e.createElement(o,{onClick:()=>j.visit("/skill-graph"),variant:"outline"},"View Skill Graph"),e.createElement($,{open:K,onOpenChange:C},e.createElement(ce,{asChild:!0},e.createElement(o,{disabled:x.length===0},e.createElement(L,{className:"w-4 h-4 mr-2"}),"Add Activity")),e.createElement(B,{className:"max-w-2xl"},e.createElement(M,null,e.createElement(R,null,"Create New Activity")),e.createElement("form",{onSubmit:J,className:"space-y-4"},e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement("div",null,e.createElement(c,{htmlFor:"name"},"Name"),e.createElement(d,{id:"name",value:a.name,onChange:t=>s("name",t.target.value),placeholder:"Activity name",required:!0}),y.name&&e.createElement("p",{className:"text-sm text-red-600"},y.name)),e.createElement("div",null,e.createElement(c,{htmlFor:"type"},"Type"),e.createElement(E,{value:a.type,onValueChange:t=>s("type",t)},e.createElement(h,null,e.createElement(g,null)),e.createElement(v,null,S.map(t=>e.createElement(f,{key:t.value,value:t.value},e.createElement("div",{className:"flex items-center space-x-2"},e.createElement(t.icon,{className:`w-4 h-4 ${t.color}`}),e.createElement("span",null,t.label)))))))),e.createElement("div",null,e.createElement(c,{htmlFor:"description"},"Description"),e.createElement(H,{id:"description",value:a.description,onChange:t=>s("description",t.target.value),placeholder:"Brief description...",rows:3})),e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement("div",null,e.createElement(c,{htmlFor:"skill"},"Skill"),e.createElement(E,{value:a.skill_id,onValueChange:t=>s("skill_id",t)},e.createElement(h,null,e.createElement(g,{placeholder:"Select skill"})),e.createElement(v,null,x.map(t=>e.createElement(f,{key:t.id,value:t.id.toString()},e.createElement("div",{className:"flex items-center space-x-2"},e.createElement("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color}}),e.createElement("span",null,t.name)))))),y.skill_id&&e.createElement("p",{className:"text-sm text-red-600"},y.skill_id)),e.createElement("div",null,e.createElement(c,{htmlFor:"status"},"Status"),e.createElement(E,{value:a.status,onValueChange:t=>s("status",t)},e.createElement(h,null,e.createElement(g,null)),e.createElement(v,null,A.map(t=>e.createElement(f,{key:t.value,value:t.value},t.label)))))),e.createElement("div",null,e.createElement(c,{htmlFor:"url"},"URL (Optional)"),e.createElement(d,{id:"url",type:"url",value:a.url,onChange:t=>s("url",t.target.value),placeholder:"https://..."})),e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement("div",null,e.createElement(c,{htmlFor:"estimated_hours"},"Estimated Hours"),e.createElement(d,{id:"estimated_hours",type:"number",value:a.estimated_hours,onChange:t=>s("estimated_hours",t.target.value),placeholder:"0",min:"0"})),e.createElement("div",null,e.createElement(c,{htmlFor:"actual_hours"},"Actual Hours"),e.createElement(d,{id:"actual_hours",type:"number",value:a.actual_hours,onChange:t=>s("actual_hours",t.target.value),placeholder:"0",min:"0"}))),e.createElement("div",null,e.createElement(c,null,"Dependencies"),e.createElement("div",{className:"space-y-2 max-h-32 overflow-y-auto"},u.map(t=>e.createElement("div",{key:t.id,className:"flex items-center space-x-2"},e.createElement("input",{type:"checkbox",id:`dep-${t.id}`,checked:a.dependencies.includes(t.id.toString()),onChange:n=>{n.target.checked?s("dependencies",[...a.dependencies,t.id.toString()]):s("dependencies",a.dependencies.filter(l=>l!==t.id.toString()))}}),e.createElement("label",{htmlFor:`dep-${t.id}`,className:"text-sm"},t.name," (",t.skill.name,")"))))),e.createElement("div",{className:"flex justify-end space-x-2"},e.createElement(o,{type:"button",variant:"outline",onClick:()=>C(!1)},"Cancel"),e.createElement(o,{type:"submit"},"Create Activity"))))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},u.map(t=>{const n=W(t.type),l=n.icon;return e.createElement(le,{key:t.id,className:"hover:shadow-lg transition-shadow"},e.createElement(ne,{className:"pb-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center space-x-3"},e.createElement(l,{className:`w-5 h-5 ${n.color}`}),e.createElement("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.skill.color}})),e.createElement("div",{className:"flex items-center space-x-2"},t.url&&e.createElement(o,{size:"sm",variant:"outline",onClick:()=>window.open(t.url,"_blank")},e.createElement(Ee,{className:"w-4 h-4"})),e.createElement(o,{size:"sm",variant:"outline",onClick:()=>Q(t)},e.createElement(ie,{className:"w-4 h-4"})),e.createElement(o,{size:"sm",variant:"outline",onClick:()=>Z(t)},e.createElement(oe,{className:"w-4 h-4"})))),e.createElement(re,{className:"text-lg"},t.name)),e.createElement(se,null,e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"text-sm text-gray-600"},"Status"),e.createElement(P,{className:`text-xs ${ee(t.status)}`},t.status.replace("_"," "))),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"text-sm text-gray-600"},"Skill"),e.createElement("span",{className:"text-sm font-medium"},t.skill.name)),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"text-sm text-gray-600"},"Type"),e.createElement("span",{className:"text-sm"},n.label)),t.depends_on.length>0&&e.createElement("div",null,e.createElement("span",{className:"text-sm text-gray-600"},"Dependencies"),e.createElement("div",{className:"flex flex-wrap gap-1 mt-1"},t.depends_on.map(r=>e.createElement(P,{key:r.id,variant:"outline",className:"text-xs"},r.name)))),t.description&&e.createElement("p",{className:"text-sm text-gray-600 line-clamp-2"},t.description))))})),e.createElement($,{open:X,onOpenChange:_},e.createElement(B,{className:"max-w-2xl"},e.createElement(M,null,e.createElement(R,null,"Edit Activity")),e.createElement("form",{onSubmit:Y,className:"space-y-4"},e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement("div",null,e.createElement(c,{htmlFor:"edit-name"},"Name"),e.createElement(d,{id:"edit-name",value:a.name,onChange:t=>s("name",t.target.value),required:!0})),e.createElement("div",null,e.createElement(c,{htmlFor:"edit-type"},"Type"),e.createElement(E,{value:a.type,onValueChange:t=>s("type",t)},e.createElement(h,null,e.createElement(g,null)),e.createElement(v,null,S.map(t=>e.createElement(f,{key:t.value,value:t.value},e.createElement("div",{className:"flex items-center space-x-2"},e.createElement(t.icon,{className:`w-4 h-4 ${t.color}`}),e.createElement("span",null,t.label)))))))),e.createElement("div",null,e.createElement(c,{htmlFor:"edit-description"},"Description"),e.createElement(H,{id:"edit-description",value:a.description,onChange:t=>s("description",t.target.value),rows:3})),e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement("div",null,e.createElement(c,{htmlFor:"edit-skill"},"Skill"),e.createElement(E,{value:a.skill_id,onValueChange:t=>s("skill_id",t)},e.createElement(h,null,e.createElement(g,null)),e.createElement(v,null,x.map(t=>e.createElement(f,{key:t.id,value:t.id.toString()},e.createElement("div",{className:"flex items-center space-x-2"},e.createElement("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color}}),e.createElement("span",null,t.name))))))),e.createElement("div",null,e.createElement(c,{htmlFor:"edit-status"},"Status"),e.createElement(E,{value:a.status,onValueChange:t=>s("status",t)},e.createElement(h,null,e.createElement(g,null)),e.createElement(v,null,A.map(t=>e.createElement(f,{key:t.value,value:t.value},t.label)))))),e.createElement("div",null,e.createElement(c,{htmlFor:"edit-url"},"URL (Optional)"),e.createElement(d,{id:"edit-url",type:"url",value:a.url,onChange:t=>s("url",t.target.value)})),e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement("div",null,e.createElement(c,{htmlFor:"edit-estimated_hours"},"Estimated Hours"),e.createElement(d,{id:"edit-estimated_hours",type:"number",value:a.estimated_hours,onChange:t=>s("estimated_hours",t.target.value),min:"0"})),e.createElement("div",null,e.createElement(c,{htmlFor:"edit-actual_hours"},"Actual Hours"),e.createElement(d,{id:"edit-actual_hours",type:"number",value:a.actual_hours,onChange:t=>s("actual_hours",t.target.value),min:"0"}))),e.createElement("div",null,e.createElement(c,null,"Dependencies"),e.createElement("div",{className:"space-y-2 max-h-32 overflow-y-auto"},te().map(t=>e.createElement("div",{key:t.id,className:"flex items-center space-x-2"},e.createElement("input",{type:"checkbox",id:`edit-dep-${t.id}`,checked:a.dependencies.includes(t.id.toString()),onChange:n=>{n.target.checked?s("dependencies",[...a.dependencies,t.id.toString()]):s("dependencies",a.dependencies.filter(l=>l!==t.id.toString()))}}),e.createElement("label",{htmlFor:`edit-dep-${t.id}`,className:"text-sm"},t.name," (",t.skill.name,")"))))),e.createElement("div",{className:"flex justify-end space-x-2"},e.createElement(o,{type:"button",variant:"outline",onClick:()=>_(!1)},"Cancel"),e.createElement(o,{type:"submit"},"Update Activity"))))),u.length===0&&e.createElement("div",{className:"text-center py-12"},e.createElement(V,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No activities yet"),e.createElement("p",{className:"text-gray-600 mb-4"},x.length===0?"Create a skill first, then add activities":"Get started by creating your first activity"),x.length===0?e.createElement(o,{onClick:()=>j.visit("/skills")},"Create Your First Skill"):e.createElement(o,{onClick:()=>C(!0)},e.createElement(L,{className:"w-4 h-4 mr-2"}),"Create Your First Activity"))))}export{Fe as default};
