import{r as N,H as Xs}from"./app-C9IywKP_.js";import{j as v}from"./app-logo-icon-B0OBywsz.js";import{c as Ws,i as Ot,a as Xt,b as Gs,d as Wt,s as nt,p as Pn,z as $n,e as Zs,f as _n,g as ht,t as Ks,h as re,u as Us,j as oe,k as qs,C as Qs}from"./course-node-BUXU6ord.js";import{A as Js}from"./app-layout-ChxqXliJ.js";/* empty css            */import"./badge-Agn9lkz4.js";import"./external-link-DsBccTjQ.js";import"./index-D6Fp34Bh.js";import"./index-DRN7Jx4a.js";function er(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),s;return function(r){for(s=0;s<n;++s)o[s]=e[s]*(1-r)+t[s]*r;return o}}function tr(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nr(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,s=new Array(o),r=new Array(n),i;for(i=0;i<o;++i)s[i]=$e(e[i],t[i]);for(;i<n;++i)r[i]=t[i];return function(a){for(i=0;i<o;++i)r[i]=s[i](a);return r}}function or(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function sr(e,t){var n={},o={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=$e(e[s],t[s]):o[s]=t[s];return function(r){for(s in n)o[s]=n[s](r);return o}}function $e(e,t){var n=typeof t,o;return t==null||n==="boolean"?Ws(t):(n==="number"?Ot:n==="string"?(o=Wt(t))?(t=o,Xt):Gs:t instanceof Wt?Xt:t instanceof Date?or:tr(t)?er:Array.isArray(t)?nr:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?sr:Ot)(e,t)}const ce={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Le=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ln=["Enter"," ","Escape"],Hn={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ne;(function(e){e.Strict="strict",e.Loose="loose"})(Ne||(Ne={}));var me;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(me||(me={}));var He;(function(e){e.Partial="partial",e.Full="full"})(He||(He={}));const jn={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ge;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ge||(ge={}));var Ue;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ue||(Ue={}));var F;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(F||(F={}));const Gt={[F.Left]:F.Right,[F.Right]:F.Left,[F.Top]:F.Bottom,[F.Bottom]:F.Top};function Dn(e){return e===null?null:e?"valid":"invalid"}const Tn=e=>"id"in e&&"source"in e&&"target"in e,rr=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Mt=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Be=(e,t=[0,0])=>{const{width:n,height:o}=de(e),s=e.origin??t,r=n*s[0],i=o*s[1];return{x:e.position.x-r,y:e.position.y-i}},ir=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,s)=>{const r=typeof s=="string";let i=!t.nodeLookup&&!r?s:void 0;t.nodeLookup&&(i=r?t.nodeLookup.get(s):Mt(s)?s:t.nodeLookup.get(s.id));const a=i?qe(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ot(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return st(n)},Re=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const s=qe(o);n=ot(n,s)}}),st(n)},It=(e,t,[n,o,s]=[0,0,1],r=!1,i=!1)=>{const a={...ze(t,[n,o,s]),width:t.width/s,height:t.height/s},l=[];for(const h of e.values()){const{measured:f,selectable:d=!0,hidden:c=!1}=h;if(i&&!d||c)continue;const g=f.width??h.width??h.initialWidth??null,m=f.height??h.height??h.initialHeight??null,p=je(a,Ce(h)),y=(g??0)*(m??0),x=r&&p>0;(!h.internals.handleBounds||x||p>=y||h.dragging)&&l.push(h)}return l},ar=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function cr(e,t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!o||o.has(s.id))&&n.set(s.id,s)}),n}async function lr({nodes:e,width:t,height:n,panZoom:o,minZoom:s,maxZoom:r},i){if(e.size===0)return Promise.resolve(!0);const a=cr(e,i),l=Re(a),h=kt(l,t,n,(i==null?void 0:i.minZoom)??s,(i==null?void 0:i.maxZoom)??r,(i==null?void 0:i.padding)??.1);return await o.setViewport(h,{duration:i==null?void 0:i.duration,ease:i==null?void 0:i.ease,interpolate:i==null?void 0:i.interpolate}),Promise.resolve(!0)}function Bn({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:s,onError:r}){const i=n.get(e),a=i.parentId?n.get(i.parentId):void 0,{x:l,y:h}=a?a.internals.positionAbsolute:{x:0,y:0},f=i.origin??o;let d=i.extent||s;if(i.extent==="parent"&&!i.expandParent)if(!a)r==null||r("005",ce.error005());else{const g=a.measured.width,m=a.measured.height;g&&m&&(d=[[l,h],[l+g,h+m]])}else a&&Me(i.extent)&&(d=[[i.extent[0][0]+l,i.extent[0][1]+h],[i.extent[1][0]+l,i.extent[1][1]+h]]);const c=Me(d)?ye(t,d,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&(r==null||r("015",ce.error015())),{position:{x:c.x-l+(i.measured.width??0)*f[0],y:c.y-h+(i.measured.height??0)*f[1]},positionAbsolute:c}}async function dr({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:s}){const r=new Set(e.map(c=>c.id)),i=[];for(const c of n){if(c.deletable===!1)continue;const g=r.has(c.id),m=!g&&c.parentId&&i.find(p=>p.id===c.parentId);(g||m)&&i.push(c)}const a=new Set(t.map(c=>c.id)),l=o.filter(c=>c.deletable!==!1),f=ar(i,l);for(const c of l)a.has(c.id)&&!f.find(m=>m.id===c.id)&&f.push(c);if(!s)return{edges:f,nodes:i};const d=await s({nodes:i,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:i}:{edges:[],nodes:[]}:d}const Se=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ye=(e={x:0,y:0},t,n)=>({x:Se(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Se(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Rn(e,t,n){const{width:o,height:s}=de(n),{x:r,y:i}=n.internals.positionAbsolute;return ye(e,[[r,i],[r+o,i+s]],t)}const Zt=(e,t,n)=>e<t?Se(Math.abs(e-t),1,t)/t:e>n?-Se(Math.abs(e-n),1,t)/t:0,zn=(e,t,n=15,o=40)=>{const s=Zt(e.x,o,t.width-o)*n,r=Zt(e.y,o,t.height-o)*n;return[s,r]},ot=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),bt=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),st=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Ce=(e,t=[0,0])=>{var s,r;const{x:n,y:o}=Mt(e)?e.internals.positionAbsolute:Be(e,t);return{x:n,y:o,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0}},qe=(e,t=[0,0])=>{var s,r;const{x:n,y:o}=Mt(e)?e.internals.positionAbsolute:Be(e,t);return{x:n,y:o,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:o+(((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0)}},Vn=(e,t)=>st(ot(bt(e),bt(t))),je=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Kt=e=>ie(e.width)&&ie(e.height)&&ie(e.x)&&ie(e.y),ie=e=>!isNaN(e)&&isFinite(e),ur=(e,t)=>{},rt=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ze=({x:e,y:t},[n,o,s],r=!1,i=[1,1])=>{const a={x:(e-n)/s,y:(t-o)/s};return r?rt(a,i):a},Qe=({x:e,y:t},[n,o,s])=>({x:e*s+n,y:t*s+o});function be(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function fr(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=be(e,n),s=be(e,t);return{top:o,right:s,bottom:o,left:s,x:s*2,y:o*2}}if(typeof e=="object"){const o=be(e.top??e.y??0,n),s=be(e.bottom??e.y??0,n),r=be(e.left??e.x??0,t),i=be(e.right??e.x??0,t);return{top:o,right:i,bottom:s,left:r,x:r+i,y:o+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function gr(e,t,n,o,s,r){const{x:i,y:a}=Qe(e,[t,n,o]),{x:l,y:h}=Qe({x:e.x+e.width,y:e.y+e.height},[t,n,o]),f=s-l,d=r-h;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(f),bottom:Math.floor(d)}}const kt=(e,t,n,o,s,r)=>{const i=fr(r,t,n),a=(t-i.x)/e.width,l=(n-i.y)/e.height,h=Math.min(a,l),f=Se(h,o,s),d=e.x+e.width/2,c=e.y+e.height/2,g=t/2-d*f,m=n/2-c*f,p=gr(e,g,m,f,t,n),y={left:Math.min(p.left-i.left,0),top:Math.min(p.top-i.top,0),right:Math.min(p.right-i.right,0),bottom:Math.min(p.bottom-i.bottom,0)};return{x:g-y.left+y.right,y:m-y.top+y.bottom,zoom:f}},Je=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Me(e){return e!==void 0&&e!=="parent"}function de(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Fn(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Yn(e,t={width:0,height:0},n,o,s){const r={...e},i=o.get(n);if(i){const a=i.origin||s;r.x+=i.internals.positionAbsolute.x-(t.width??0)*a[0],r.y+=i.internals.positionAbsolute.y-(t.height??0)*a[1]}return r}function Ut(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function hr(){let e,t;return{promise:new Promise((o,s)=>{e=o,t=s}),resolve:e,reject:t}}function pr(e){return{...Hn,...e||{}}}function _e(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:s}){const{x:r,y:i}=ae(e),a=ze({x:r-((s==null?void 0:s.left)??0),y:i-((s==null?void 0:s.top)??0)},o),{x:l,y:h}=n?rt(a,t):a;return{xSnapped:l,ySnapped:h,...a}}const At=e=>({width:e.offsetWidth,height:e.offsetHeight}),On=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},mr=["INPUT","SELECT","TEXTAREA"];function Xn(e){var o,s;const t=((s=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:mr.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Wn=e=>"clientX"in e,ae=(e,t)=>{var r,i;const n=Wn(e),o=n?e.clientX:(r=e.touches)==null?void 0:r[0].clientX,s=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},qt=(e,t,n,o,s)=>{const r=t.querySelectorAll(`.${e}`);return!r||!r.length?null:Array.from(r).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:s,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...At(i)}})};function Gn({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:s,sourceControlY:r,targetControlX:i,targetControlY:a}){const l=e*.125+s*.375+i*.375+n*.125,h=t*.125+r*.375+a*.375+o*.125,f=Math.abs(l-e),d=Math.abs(h-t);return[l,h,f,d]}function We(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Qt({pos:e,x1:t,y1:n,x2:o,y2:s,c:r}){switch(e){case F.Left:return[t-We(t-o,r),n];case F.Right:return[t+We(o-t,r),n];case F.Top:return[t,n-We(n-s,r)];case F.Bottom:return[t,n+We(s-n,r)]}}function Zn({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:o,targetY:s,targetPosition:r=F.Top,curvature:i=.25}){const[a,l]=Qt({pos:n,x1:e,y1:t,x2:o,y2:s,c:i}),[h,f]=Qt({pos:r,x1:o,y1:s,x2:e,y2:t,c:i}),[d,c,g,m]=Gn({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:h,targetControlY:f});return[`M${e},${t} C${a},${l} ${h},${f} ${o},${s}`,d,c,g,m]}function Kn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const s=Math.abs(n-e)/2,r=n<e?n+s:n-s,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[r,a,s,i]}function yr({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o,elevateOnSelect:s=!1}){if(o!==void 0)return o;const r=s&&n?1e3:0,i=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return r+i}function xr({sourceNode:e,targetNode:t,width:n,height:o,transform:s}){const r=ot(qe(e),qe(t));r.x===r.x2&&(r.x2+=1),r.y===r.y2&&(r.y2+=1);const i={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:o/s[2]};return je(i,st(r))>0}const wr=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,br=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Un=(e,t)=>{if(!e.source||!e.target)return t;let n;return Tn(e)?n={...e}:n={...e,id:wr(e)},br(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function qn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[s,r,i,a]=Kn({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,s,r,i,a]}const Jt={[F.Left]:{x:-1,y:0},[F.Right]:{x:1,y:0},[F.Top]:{x:0,y:-1},[F.Bottom]:{x:0,y:1}},Er=({source:e,sourcePosition:t=F.Bottom,target:n})=>t===F.Left||t===F.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},en=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function vr({source:e,sourcePosition:t=F.Bottom,target:n,targetPosition:o=F.Top,center:s,offset:r,stepPosition:i}){const a=Jt[t],l=Jt[o],h={x:e.x+a.x*r,y:e.y+a.y*r},f={x:n.x+l.x*r,y:n.y+l.y*r},d=Er({source:h,sourcePosition:t,target:f}),c=d.x!==0?"x":"y",g=d[c];let m=[],p,y;const x={x:0,y:0},b={x:0,y:0},[,,u,w]=Kn({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[c]*l[c]===-1){c==="x"?(p=s.x??h.x+(f.x-h.x)*i,y=s.y??(h.y+f.y)/2):(p=s.x??(h.x+f.x)/2,y=s.y??h.y+(f.y-h.y)*i);const C=[{x:p,y:h.y},{x:p,y:f.y}],M=[{x:h.x,y},{x:f.x,y}];a[c]===g?m=c==="x"?C:M:m=c==="x"?M:C}else{const C=[{x:h.x,y:f.y}],M=[{x:f.x,y:h.y}];if(c==="x"?m=a.x===g?M:C:m=a.y===g?C:M,t===o){const A=Math.abs(e[c]-n[c]);if(A<=r){const P=Math.min(r-1,r-A);a[c]===g?x[c]=(h[c]>e[c]?-1:1)*P:b[c]=(f[c]>n[c]?-1:1)*P}}if(t!==o){const A=c==="x"?"y":"x",P=a[c]===l[A],L=h[A]>f[A],H=h[A]<f[A];(a[c]===1&&(!P&&L||P&&H)||a[c]!==1&&(!P&&H||P&&L))&&(m=c==="x"?C:M)}const S={x:h.x+x.x,y:h.y+x.y},_={x:f.x+b.x,y:f.y+b.y},R=Math.max(Math.abs(S.x-m[0].x),Math.abs(_.x-m[0].x)),k=Math.max(Math.abs(S.y-m[0].y),Math.abs(_.y-m[0].y));R>=k?(p=(S.x+_.x)/2,y=m[0].y):(p=m[0].x,y=(S.y+_.y)/2)}return[[e,{x:h.x+x.x,y:h.y+x.y},...m,{x:f.x+b.x,y:f.y+b.y},n],p,y,u,w]}function Nr(e,t,n,o){const s=Math.min(en(e,t)/2,en(t,n)/2,o),{x:r,y:i}=t;if(e.x===r&&r===n.x||e.y===i&&i===n.y)return`L${r} ${i}`;if(e.y===i){const h=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${r+s*h},${i}Q ${r},${i} ${r},${i+s*f}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${r},${i+s*l}Q ${r},${i} ${r+s*a},${i}`}function Et({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:o,targetY:s,targetPosition:r=F.Top,borderRadius:i=5,centerX:a,centerY:l,offset:h=20,stepPosition:f=.5}){const[d,c,g,m,p]=vr({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:s},targetPosition:r,center:{x:a,y:l},offset:h,stepPosition:f});return[d.reduce((x,b,u)=>{let w="";return u>0&&u<d.length-1?w=Nr(d[u-1],b,d[u+1],i):w=`${u===0?"M":"L"}${b.x} ${b.y}`,x+=w,x},""),c,g,m,p]}function tn(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Sr(e){var d;const{sourceNode:t,targetNode:n}=e;if(!tn(t)||!tn(n))return null;const o=t.internals.handleBounds||nn(t.handles),s=n.internals.handleBounds||nn(n.handles),r=on((o==null?void 0:o.source)??[],e.sourceHandle),i=on(e.connectionMode===Ne.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!r||!i)return(d=e.onError)==null||d.call(e,"008",ce.error008(r?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(r==null?void 0:r.position)||F.Bottom,l=(i==null?void 0:i.position)||F.Top,h=De(t,r,a),f=De(n,i,l);return{sourceX:h.x,sourceY:h.y,targetX:f.x,targetY:f.y,sourcePosition:a,targetPosition:l}}function nn(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function De(e,t,n=F.Left,o=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,r=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:a}=t??de(e);if(o)return{x:s+i/2,y:r+a/2};switch((t==null?void 0:t.position)??n){case F.Top:return{x:s+i/2,y:r};case F.Right:return{x:s+i,y:r+a/2};case F.Bottom:return{x:s+i/2,y:r+a};case F.Left:return{x:s,y:r+a/2}}}function on(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function vt(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Cr(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:s}){const r=new Set;return e.reduce((i,a)=>([a.markerStart||o,a.markerEnd||s].forEach(l=>{if(l&&typeof l=="object"){const h=vt(l,t);r.has(h)||(i.push({id:h,color:l.color||n,...l}),r.add(h))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))}const Pt={nodeOrigin:[0,0],nodeExtent:Le,elevateNodesOnSelect:!0,defaults:{}},Mr={...Pt,checkEquality:!0};function $t(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Ir(e,t,n){const o=$t(Pt,n);for(const s of e.values())if(s.parentId)_t(s,e,t,o);else{const r=Be(s,o.nodeOrigin),i=Me(s.extent)?s.extent:o.nodeExtent,a=ye(r,i,de(s));s.internals.positionAbsolute=a}}function Nt(e,t,n,o){var l,h;const s=$t(Mr,o);let r=e.length>0;const i=new Map(t),a=s!=null&&s.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const f of e){let d=i.get(f.id);if(s.checkEquality&&f===(d==null?void 0:d.internals.userNode))t.set(f.id,d);else{const c=Be(f,s.nodeOrigin),g=Me(f.extent)?f.extent:s.nodeExtent,m=ye(c,g,de(f));d={...s.defaults,...f,measured:{width:(l=f.measured)==null?void 0:l.width,height:(h=f.measured)==null?void 0:h.height},internals:{positionAbsolute:m,handleBounds:f.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Qn(f,a),userNode:f}},t.set(f.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(r=!1),f.parentId&&_t(d,t,n,o)}return r}function kr(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function _t(e,t,n,o){const{elevateNodesOnSelect:s,nodeOrigin:r,nodeExtent:i}=$t(Pt,o),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}kr(e,n);const h=s?1e3:0,{x:f,y:d,z:c}=Ar(e,l,r,i,h),{positionAbsolute:g}=e.internals,m=f!==g.x||d!==g.y;(m||c!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:f,y:d}:g,z:c}})}function Qn(e,t){return(ie(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Ar(e,t,n,o,s){const{x:r,y:i}=t.internals.positionAbsolute,a=de(e),l=Be(e,n),h=Me(e.extent)?ye(l,e.extent,a):l;let f=ye({x:r+h.x,y:i+h.y},o,a);e.extent==="parent"&&(f=Rn(f,a,t));const d=Qn(e,s),c=t.internals.z??0;return{x:f.x,y:f.y,z:c>=d?c+1:d}}function Lt(e,t,n,o=[0,0]){var i;const s=[],r=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const h=((i=r.get(a.parentId))==null?void 0:i.expandedRect)??Ce(l),f=Vn(h,a.rect);r.set(a.parentId,{expandedRect:f,parent:l})}return r.size>0&&r.forEach(({expandedRect:a,parent:l},h)=>{var u;const f=l.internals.positionAbsolute,d=de(l),c=l.origin??o,g=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,m=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,p=Math.max(d.width,Math.round(a.width)),y=Math.max(d.height,Math.round(a.height)),x=(p-d.width)*c[0],b=(y-d.height)*c[1];(g>0||m>0||x||b)&&(s.push({id:h,type:"position",position:{x:l.position.x-g+x,y:l.position.y-m+b}}),(u=n.get(h))==null||u.forEach(w=>{e.some(E=>E.id===w.id)||s.push({id:w.id,type:"position",position:{x:w.position.x+g,y:w.position.y+m}})})),(d.width<a.width||d.height<a.height||g||m)&&s.push({id:h,type:"dimensions",setAttributes:!0,dimensions:{width:p+(g?c[0]*g-x:0),height:y+(m?c[1]*m-b:0)}})}),s}function Pr(e,t,n,o,s,r){const i=o==null?void 0:o.querySelector(".xyflow__viewport");let a=!1;if(!i)return{changes:[],updatedInternals:a};const l=[],h=window.getComputedStyle(i),{m22:f}=new window.DOMMatrixReadOnly(h.transform),d=[];for(const c of e.values()){const g=t.get(c.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const m=At(c.nodeElement),p=g.measured.width!==m.width||g.measured.height!==m.height;if(!!(m.width&&m.height&&(p||!g.internals.handleBounds||c.force))){const x=c.nodeElement.getBoundingClientRect(),b=Me(g.extent)?g.extent:r;let{positionAbsolute:u}=g.internals;g.parentId&&g.extent==="parent"?u=Rn(u,m,t.get(g.parentId)):b&&(u=ye(u,b,m));const w={...g,measured:m,internals:{...g.internals,positionAbsolute:u,handleBounds:{source:qt("source",c.nodeElement,x,f,g.id),target:qt("target",c.nodeElement,x,f,g.id)}}};t.set(g.id,w),g.parentId&&_t(w,t,n,{nodeOrigin:s}),a=!0,p&&(l.push({id:g.id,type:"dimensions",dimensions:m}),g.expandParent&&g.parentId&&d.push({id:g.id,parentId:g.parentId,rect:Ce(w,s)}))}}if(d.length>0){const c=Lt(d,t,n,s);l.push(...c)}return{changes:l,updatedInternals:a}}async function $r({delta:e,panZoom:t,transform:n,translateExtent:o,width:s,height:r}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,r]],o),a=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(a)}function sn(e,t,n,o,s,r){let i=s;const a=o.get(i)||new Map;o.set(i,a.set(n,t)),i=`${s}-${e}`;const l=o.get(i)||new Map;if(o.set(i,l.set(n,t)),r){i=`${s}-${e}-${r}`;const h=o.get(i)||new Map;o.set(i,h.set(n,t))}}function Jn(e,t,n){e.clear(),t.clear();for(const o of n){const{source:s,target:r,sourceHandle:i=null,targetHandle:a=null}=o,l={edgeId:o.id,source:s,target:r,sourceHandle:i,targetHandle:a},h=`${s}-${i}--${r}-${a}`,f=`${r}-${a}--${s}-${i}`;sn("source",l,f,e,s,i),sn("target",l,h,e,r,a),t.set(o.id,o)}}function eo(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:eo(n,t):!1}function rn(e,t,n){var s;let o=e;do{if((s=o==null?void 0:o.matches)!=null&&s.call(o,t))return!0;if(o===n)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function _r(e,t,n,o){const s=new Map;for(const[r,i]of e)if((i.selected||i.id===o)&&(!i.parentId||!eo(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const a=e.get(r);a&&s.set(r,{id:r,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return s}function pt({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var i,a,l;const s=[];for(const[h,f]of t){const d=(i=n.get(h))==null?void 0:i.internals.userNode;d&&s.push({...d,position:f.position,dragging:o})}if(!e)return[s[0],s];const r=(a=n.get(e))==null?void 0:a.internals.userNode;return[r?{...r,position:((l=t.get(e))==null?void 0:l.position)||r.position,dragging:o}:s[0],s]}function Lr({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:s}){let r={x:null,y:null},i=0,a=new Map,l=!1,h={x:0,y:0},f=null,d=!1,c=null,g=!1,m=!1;function p({noDragClassName:x,handleSelector:b,domNode:u,isSelectable:w,nodeId:E,nodeClickDistance:C=0}){c=nt(u);function M({x:k,y:A},P){const{nodeLookup:L,nodeExtent:H,snapGrid:j,snapToGrid:$,nodeOrigin:T,onNodeDrag:I,onSelectionDrag:B,onError:D,updateNodePositions:z}=t();r={x:k,y:A};let Y=!1,O={x:0,y:0,x2:0,y2:0};if(a.size>1&&H){const q=Re(a);O=bt(q)}for(const[q,K]of a){if(!L.has(q))continue;let U={x:k-K.distance.x,y:A-K.distance.y};$&&(U=rt(U,j));let V=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];if(a.size>1&&H&&!K.extent){const{positionAbsolute:Q}=K.internals,X=Q.x-O.x+H[0][0],Z=Q.x+K.measured.width-O.x2+H[1][0],W=Q.y-O.y+H[0][1],te=Q.y+K.measured.height-O.y2+H[1][1];V=[[X,W],[Z,te]]}const{position:G,positionAbsolute:ee}=Bn({nodeId:q,nextPosition:U,nodeLookup:L,nodeExtent:V,nodeOrigin:T,onError:D});Y=Y||K.position.x!==G.x||K.position.y!==G.y,K.position=G,K.internals.positionAbsolute=ee}if(m=m||Y,!!Y&&(z(a,!0),P&&(o||I||!E&&B))){const[q,K]=pt({nodeId:E,dragItems:a,nodeLookup:L});o==null||o(P,a,q,K),I==null||I(P,q,K),E||B==null||B(P,K)}}async function S(){if(!f)return;const{transform:k,panBy:A,autoPanSpeed:P,autoPanOnNodeDrag:L}=t();if(!L){l=!1,cancelAnimationFrame(i);return}const[H,j]=zn(h,f,P);(H!==0||j!==0)&&(r.x=(r.x??0)-H/k[2],r.y=(r.y??0)-j/k[2],await A({x:H,y:j})&&M(r,null)),i=requestAnimationFrame(S)}function _(k){var Y;const{nodeLookup:A,multiSelectionActive:P,nodesDraggable:L,transform:H,snapGrid:j,snapToGrid:$,selectNodesOnDrag:T,onNodeDragStart:I,onSelectionDragStart:B,unselectNodesAndEdges:D}=t();d=!0,(!T||!w)&&!P&&E&&((Y=A.get(E))!=null&&Y.selected||D()),w&&T&&E&&(e==null||e(E));const z=_e(k.sourceEvent,{transform:H,snapGrid:j,snapToGrid:$,containerBounds:f});if(r=z,a=_r(A,L,z,E),a.size>0&&(n||I||!E&&B)){const[O,q]=pt({nodeId:E,dragItems:a,nodeLookup:A});n==null||n(k.sourceEvent,a,O,q),I==null||I(k.sourceEvent,O,q),E||B==null||B(k.sourceEvent,q)}}const R=_n().clickDistance(C).on("start",k=>{const{domNode:A,nodeDragThreshold:P,transform:L,snapGrid:H,snapToGrid:j}=t();f=(A==null?void 0:A.getBoundingClientRect())||null,g=!1,m=!1,P===0&&_(k),r=_e(k.sourceEvent,{transform:L,snapGrid:H,snapToGrid:j,containerBounds:f}),h=ae(k.sourceEvent,f)}).on("drag",k=>{const{autoPanOnNodeDrag:A,transform:P,snapGrid:L,snapToGrid:H,nodeDragThreshold:j,nodeLookup:$}=t(),T=_e(k.sourceEvent,{transform:P,snapGrid:L,snapToGrid:H,containerBounds:f});if((k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1||E&&!$.has(E))&&(g=!0),!g){if(!l&&A&&d&&(l=!0,S()),!d){const I=T.xSnapped-(r.x??0),B=T.ySnapped-(r.y??0);Math.sqrt(I*I+B*B)>j&&_(k)}(r.x!==T.xSnapped||r.y!==T.ySnapped)&&a&&d&&(h=ae(k.sourceEvent,f),M(T,k.sourceEvent))}}).on("end",k=>{if(!(!d||g)&&(l=!1,d=!1,cancelAnimationFrame(i),a.size>0)){const{nodeLookup:A,updateNodePositions:P,onNodeDragStop:L,onSelectionDragStop:H}=t();if(m&&(P(a,!1),m=!1),s||L||!E&&H){const[j,$]=pt({nodeId:E,dragItems:a,nodeLookup:A,dragging:!1});s==null||s(k.sourceEvent,a,j,$),L==null||L(k.sourceEvent,j,$),E||H==null||H(k.sourceEvent,$)}}}).filter(k=>{const A=k.target;return!k.button&&(!x||!rn(A,`.${x}`,u))&&(!b||rn(A,b,u))});c.call(R)}function y(){c==null||c.on(".drag",null)}return{update:p,destroy:y}}function Hr(e,t,n){const o=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const r of t.values())je(s,Ce(r))>0&&o.push(r);return o}const jr=250;function Dr(e,t,n,o){var a,l;let s=[],r=1/0;const i=Hr(e,n,t+jr);for(const h of i){const f=[...((a=h.internals.handleBounds)==null?void 0:a.source)??[],...((l=h.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of f){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:c,y:g}=De(h,d,d.position,!0),m=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(g-e.y,2));m>t||(m<r?(s=[{...d,x:c,y:g}],r=m):m===r&&s.push({...d,x:c,y:g}))}}if(!s.length)return null;if(s.length>1){const h=o.type==="source"?"target":"source";return s.find(f=>f.type===h)??s[0]}return s[0]}function to(e,t,n,o,s,r=!1){var h,f,d;const i=o.get(e);if(!i)return null;const a=s==="strict"?(h=i.internals.handleBounds)==null?void 0:h[t]:[...((f=i.internals.handleBounds)==null?void 0:f.source)??[],...((d=i.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(c=>c.id===n):a==null?void 0:a[0])??null;return l&&r?{...l,...De(i,l,l.position,!0)}:l}function no(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Tr(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const oo=()=>!0;function Br(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:s,edgeUpdaterType:r,isTarget:i,domNode:a,nodeLookup:l,lib:h,autoPanOnConnect:f,flowId:d,panBy:c,cancelConnection:g,onConnectStart:m,onConnect:p,onConnectEnd:y,isValidConnection:x=oo,onReconnectEnd:b,updateConnection:u,getTransform:w,getFromHandle:E,autoPanSpeed:C,dragThreshold:M=1}){const S=On(e.target);let _=0,R;const{x:k,y:A}=ae(e),P=S==null?void 0:S.elementFromPoint(k,A),L=no(r,P),H=a==null?void 0:a.getBoundingClientRect();let j=!1;if(!H||!L)return;const $=to(s,L,o,l,t);if(!$)return;let T=ae(e,H),I=!1,B=null,D=!1,z=null;function Y(){if(!f||!H)return;const[Q,X]=zn(T,H,C);c({x:Q,y:X}),_=requestAnimationFrame(Y)}const O={...$,nodeId:s,type:L,position:$.position},q=l.get(s);let U={inProgress:!0,isValid:null,from:De(q,O,F.Left,!0),fromHandle:O,fromPosition:O.position,fromNode:q,to:T,toHandle:null,toPosition:Gt[O.position],toNode:null};function V(){j=!0,u(U),m==null||m(e,{nodeId:s,handleId:o,handleType:L})}M===0&&V();function G(Q){if(!j){const{x:te,y:se}=ae(Q),le=te-k,xe=se-A;if(!(le*le+xe*xe>M*M))return;V()}if(!E()||!O){ee(Q);return}const X=w();T=ae(Q,H),R=Dr(ze(T,X,!1,[1,1]),n,l,O),I||(Y(),I=!0);const Z=so(Q,{handle:R,connectionMode:t,fromNodeId:s,fromHandleId:o,fromType:i?"target":"source",isValidConnection:x,doc:S,lib:h,flowId:d,nodeLookup:l});z=Z.handleDomNode,B=Z.connection,D=Tr(!!R,Z.isValid);const W={...U,isValid:D,to:Z.toHandle&&D?Qe({x:Z.toHandle.x,y:Z.toHandle.y},X):T,toHandle:Z.toHandle,toPosition:D&&Z.toHandle?Z.toHandle.position:Gt[O.position],toNode:Z.toHandle?l.get(Z.toHandle.nodeId):null};D&&R&&U.toHandle&&W.toHandle&&U.toHandle.type===W.toHandle.type&&U.toHandle.nodeId===W.toHandle.nodeId&&U.toHandle.id===W.toHandle.id&&U.to.x===W.to.x&&U.to.y===W.to.y||(u(W),U=W)}function ee(Q){if(j){(R||z)&&B&&D&&(p==null||p(B));const{inProgress:X,...Z}=U,W={...Z,toPosition:U.toHandle?U.toPosition:null};y==null||y(Q,W),r&&(b==null||b(Q,W))}g(),cancelAnimationFrame(_),I=!1,D=!1,B=null,z=null,S.removeEventListener("mousemove",G),S.removeEventListener("mouseup",ee),S.removeEventListener("touchmove",G),S.removeEventListener("touchend",ee)}S.addEventListener("mousemove",G),S.addEventListener("mouseup",ee),S.addEventListener("touchmove",G),S.addEventListener("touchend",ee)}function so(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:s,fromType:r,doc:i,lib:a,flowId:l,isValidConnection:h=oo,nodeLookup:f}){const d=r==="target",c=t?i.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:m}=ae(e),p=i.elementFromPoint(g,m),y=p!=null&&p.classList.contains(`${a}-flow__handle`)?p:c,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const b=no(void 0,y),u=y.getAttribute("data-nodeid"),w=y.getAttribute("data-handleid"),E=y.classList.contains("connectable"),C=y.classList.contains("connectableend");if(!u||!b)return x;const M={source:d?u:o,sourceHandle:d?w:s,target:d?o:u,targetHandle:d?s:w};x.connection=M;const _=E&&C&&(n===Ne.Strict?d&&b==="source"||!d&&b==="target":u!==o||w!==s);x.isValid=_&&h(M),x.toHandle=to(u,b,w,f,n,!0)}return x}const St={onPointerDown:Br,isValid:so};function Rr({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const s=nt(e);function r({translateExtent:a,width:l,height:h,zoomStep:f=10,pannable:d=!0,zoomable:c=!0,inversePan:g=!1}){const m=u=>{const w=n();if(u.sourceEvent.type!=="wheel"||!t)return;const E=-u.sourceEvent.deltaY*(u.sourceEvent.deltaMode===1?.05:u.sourceEvent.deltaMode?1:.002)*f,C=w[2]*Math.pow(2,E);t.scaleTo(C)};let p=[0,0];const y=u=>{(u.sourceEvent.type==="mousedown"||u.sourceEvent.type==="touchstart")&&(p=[u.sourceEvent.clientX??u.sourceEvent.touches[0].clientX,u.sourceEvent.clientY??u.sourceEvent.touches[0].clientY])},x=u=>{const w=n();if(u.sourceEvent.type!=="mousemove"&&u.sourceEvent.type!=="touchmove"||!t)return;const E=[u.sourceEvent.clientX??u.sourceEvent.touches[0].clientX,u.sourceEvent.clientY??u.sourceEvent.touches[0].clientY],C=[E[0]-p[0],E[1]-p[1]];p=E;const M=o()*Math.max(w[2],Math.log(w[2]))*(g?-1:1),S={x:w[0]-C[0]*M,y:w[1]-C[1]*M},_=[[0,0],[l,h]];t.setViewportConstrained({x:S.x,y:S.y,zoom:w[2]},_,a)},b=$n().on("start",y).on("zoom",d?x:null).on("zoom.wheel",c?m:null);s.call(b,{})}function i(){s.on("zoom",null)}return{update:r,destroy:i,pointer:Pn}}const zr=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,it=e=>({x:e.x,y:e.y,zoom:e.k}),mt=({x:e,y:t,zoom:n})=>Zs.translate(e,t).scale(n),Ee=(e,t)=>e.target.closest(`.${t}`),ro=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Vr=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,yt=(e,t=0,n=Vr,o=()=>{})=>{const s=typeof t=="number"&&t>0;return s||o(),s?e.transition().duration(t).ease(n).on("end",o):e},io=e=>{const t=e.ctrlKey&&Je()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Fr({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:s,panOnScrollSpeed:r,zoomOnPinch:i,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:h}){return f=>{if(Ee(f,t))return!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&i){const y=Pn(f),x=io(f),b=d*Math.pow(2,x);o.scaleTo(n,b,y,f);return}const c=f.deltaMode===1?20:1;let g=s===me.Vertical?0:f.deltaX*c,m=s===me.Horizontal?0:f.deltaY*c;!Je()&&f.shiftKey&&s!==me.Vertical&&(g=f.deltaY*c,m=0),o.translateBy(n,-(g/d)*r,-(m/d)*r,{internal:!0});const p=it(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(f,p)),e.isPanScrolling&&(l==null||l(f,p),e.panScrollTimeout=setTimeout(()=>{h==null||h(f,p),e.isPanScrolling=!1},150))}}function Yr({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,s){const r=o.type==="wheel",i=!t&&r&&!o.ctrlKey,a=Ee(o,e);if(o.ctrlKey&&r&&a&&o.preventDefault(),i||a)return null;o.preventDefault(),n.call(this,o,s)}}function Or({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var r,i,a;if((r=o.sourceEvent)!=null&&r.internal)return;const s=it(o.transform);e.mouseButton=((i=o.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((a=o.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,s))}}function Xr({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:s}){return r=>{var i,a;e.usedRightMouseButton=!!(n&&ro(t,e.mouseButton??0)),(i=r.sourceEvent)!=null&&i.sync||o([r.transform.x,r.transform.y,r.transform.k]),s&&!((a=r.sourceEvent)!=null&&a.internal)&&(s==null||s(r.sourceEvent,it(r.transform)))}}function Wr({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:s,onPaneContextMenu:r}){return i=>{var a;if(!((a=i.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,r&&ro(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&r(i.sourceEvent),e.usedRightMouseButton=!1,o(!1),s&&zr(e.prevViewport,i.transform))){const l=it(i.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(i.sourceEvent,l)},n?150:0)}}}function Gr({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:s,zoomOnDoubleClick:r,userSelectionActive:i,noWheelClassName:a,noPanClassName:l,lib:h}){return f=>{var m;const d=e||t,c=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(Ee(f,`${h}-flow__node`)||Ee(f,`${h}-flow__edge`)))return!0;if(!o&&!d&&!s&&!r&&!n||i||Ee(f,a)&&f.type==="wheel"||Ee(f,l)&&(f.type!=="wheel"||s&&f.type==="wheel"&&!e)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((m=f.touches)==null?void 0:m.length)>1)return f.preventDefault(),!1;if(!d&&!s&&!c&&f.type==="wheel"||!o&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(o)&&!o.includes(f.button)&&f.type==="mousedown")return!1;const g=Array.isArray(o)&&o.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&g}}function Zr({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:s,viewport:r,onPanZoom:i,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:h}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),c=$n().clickDistance(!ie(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(s),g=nt(e).call(c);u({x:r.x,y:r.y,zoom:Se(r.zoom,t,n)},[[0,0],[d.width,d.height]],s);const m=g.on("wheel.zoom"),p=g.on("dblclick.zoom");c.wheelDelta(io);function y(A,P){return g?new Promise(L=>{c==null||c.interpolate((P==null?void 0:P.interpolate)==="linear"?$e:ht).transform(yt(g,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>L(!0)),A)}):Promise.resolve(!1)}function x({noWheelClassName:A,noPanClassName:P,onPaneContextMenu:L,userSelectionActive:H,panOnScroll:j,panOnDrag:$,panOnScrollMode:T,panOnScrollSpeed:I,preventScrolling:B,zoomOnPinch:D,zoomOnScroll:z,zoomOnDoubleClick:Y,zoomActivationKeyPressed:O,lib:q,onTransformChange:K}){H&&!f.isZoomingOrPanning&&b();const V=j&&!O&&!H?Fr({zoomPanValues:f,noWheelClassName:A,d3Selection:g,d3Zoom:c,panOnScrollMode:T,panOnScrollSpeed:I,zoomOnPinch:D,onPanZoomStart:a,onPanZoom:i,onPanZoomEnd:l}):Yr({noWheelClassName:A,preventScrolling:B,d3ZoomHandler:m});if(g.on("wheel.zoom",V,{passive:!1}),!H){const ee=Or({zoomPanValues:f,onDraggingChange:h,onPanZoomStart:a});c.on("start",ee);const Q=Xr({zoomPanValues:f,panOnDrag:$,onPaneContextMenu:!!L,onPanZoom:i,onTransformChange:K});c.on("zoom",Q);const X=Wr({zoomPanValues:f,panOnDrag:$,panOnScroll:j,onPaneContextMenu:L,onPanZoomEnd:l,onDraggingChange:h});c.on("end",X)}const G=Gr({zoomActivationKeyPressed:O,panOnDrag:$,zoomOnScroll:z,panOnScroll:j,zoomOnDoubleClick:Y,zoomOnPinch:D,userSelectionActive:H,noPanClassName:P,noWheelClassName:A,lib:q});c.filter(G),Y?g.on("dblclick.zoom",p):g.on("dblclick.zoom",null)}function b(){c.on("zoom",null)}async function u(A,P,L){const H=mt(A),j=c==null?void 0:c.constrain()(H,P,L);return j&&await y(j),new Promise($=>$(j))}async function w(A,P){const L=mt(A);return await y(L,P),new Promise(H=>H(L))}function E(A){if(g){const P=mt(A),L=g.property("__zoom");(L.k!==A.zoom||L.x!==A.x||L.y!==A.y)&&(c==null||c.transform(g,P,null,{sync:!0}))}}function C(){const A=g?Ks(g.node()):{x:0,y:0,k:1};return{x:A.x,y:A.y,zoom:A.k}}function M(A,P){return g?new Promise(L=>{c==null||c.interpolate((P==null?void 0:P.interpolate)==="linear"?$e:ht).scaleTo(yt(g,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>L(!0)),A)}):Promise.resolve(!1)}function S(A,P){return g?new Promise(L=>{c==null||c.interpolate((P==null?void 0:P.interpolate)==="linear"?$e:ht).scaleBy(yt(g,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>L(!0)),A)}):Promise.resolve(!1)}function _(A){c==null||c.scaleExtent(A)}function R(A){c==null||c.translateExtent(A)}function k(A){const P=!ie(A)||A<0?0:A;c==null||c.clickDistance(P)}return{update:x,destroy:b,setViewport:w,setViewportConstrained:u,getViewport:C,scaleTo:M,scaleBy:S,setScaleExtent:_,setTranslateExtent:R,syncViewport:E,setClickDistance:k}}var Ie;(function(e){e.Line="line",e.Handle="handle"})(Ie||(Ie={}));function Kr({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:s,affectsY:r}){const i=e-t,a=n-o,l=[i>0?1:i<0?-1:0,a>0?1:a<0?-1:0];return i&&s&&(l[0]=l[0]*-1),a&&r&&(l[1]=l[1]*-1),l}function Ur(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:s}}function ue(e,t){return Math.max(0,t-e)}function fe(e,t){return Math.max(0,e-t)}function Ge(e,t,n){return Math.max(0,t-e,e-n)}function an(e,t){return e?!t:t}function qr(e,t,n,o,s,r,i,a){let{affectsX:l,affectsY:h}=t;const{isHorizontal:f,isVertical:d}=t,c=f&&d,{xSnapped:g,ySnapped:m}=n,{minWidth:p,maxWidth:y,minHeight:x,maxHeight:b}=o,{x:u,y:w,width:E,height:C,aspectRatio:M}=e;let S=Math.floor(f?g-e.pointerX:0),_=Math.floor(d?m-e.pointerY:0);const R=E+(l?-S:S),k=C+(h?-_:_),A=-r[0]*E,P=-r[1]*C;let L=Ge(R,p,y),H=Ge(k,x,b);if(i){let T=0,I=0;l&&S<0?T=ue(u+S+A,i[0][0]):!l&&S>0&&(T=fe(u+R+A,i[1][0])),h&&_<0?I=ue(w+_+P,i[0][1]):!h&&_>0&&(I=fe(w+k+P,i[1][1])),L=Math.max(L,T),H=Math.max(H,I)}if(a){let T=0,I=0;l&&S>0?T=fe(u+S,a[0][0]):!l&&S<0&&(T=ue(u+R,a[1][0])),h&&_>0?I=fe(w+_,a[0][1]):!h&&_<0&&(I=ue(w+k,a[1][1])),L=Math.max(L,T),H=Math.max(H,I)}if(s){if(f){const T=Ge(R/M,x,b)*M;if(L=Math.max(L,T),i){let I=0;!l&&!h||l&&!h&&c?I=fe(w+P+R/M,i[1][1])*M:I=ue(w+P+(l?S:-S)/M,i[0][1])*M,L=Math.max(L,I)}if(a){let I=0;!l&&!h||l&&!h&&c?I=ue(w+R/M,a[1][1])*M:I=fe(w+(l?S:-S)/M,a[0][1])*M,L=Math.max(L,I)}}if(d){const T=Ge(k*M,p,y)/M;if(H=Math.max(H,T),i){let I=0;!l&&!h||h&&!l&&c?I=fe(u+k*M+A,i[1][0])/M:I=ue(u+(h?_:-_)*M+A,i[0][0])/M,H=Math.max(H,I)}if(a){let I=0;!l&&!h||h&&!l&&c?I=ue(u+k*M,a[1][0])/M:I=fe(u+(h?_:-_)*M,a[0][0])/M,H=Math.max(H,I)}}}_=_+(_<0?H:-H),S=S+(S<0?L:-L),s&&(c?R>k*M?_=(an(l,h)?-S:S)/M:S=(an(l,h)?-_:_)*M:f?(_=S/M,h=l):(S=_*M,l=h));const j=l?u+S:u,$=h?w+_:w;return{width:E+(l?-S:S),height:C+(h?-_:_),x:r[0]*S*(l?-1:1)+j,y:r[1]*_*(h?-1:1)+$}}const ao={width:0,height:0,x:0,y:0},Qr={...ao,pointerX:0,pointerY:0,aspectRatio:1};function Jr(e){return[[0,0],[e.measured.width,e.measured.height]]}function ei(e,t,n){const o=t.position.x+e.position.x,s=t.position.y+e.position.y,r=e.measured.width??0,i=e.measured.height??0,a=n[0]*r,l=n[1]*i;return[[o-a,s-l],[o+r-a,s+i-l]]}function ti({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:s}){const r=nt(e);function i({controlPosition:l,boundaries:h,keepAspectRatio:f,resizeDirection:d,onResizeStart:c,onResize:g,onResizeEnd:m,shouldResize:p}){let y={...ao},x={...Qr};const b=Ur(l);let u,w=null,E=[],C,M,S;const _=_n().on("start",R=>{const{nodeLookup:k,transform:A,snapGrid:P,snapToGrid:L,nodeOrigin:H,paneDomNode:j}=n();if(u=k.get(t),!u)return;w=(j==null?void 0:j.getBoundingClientRect())??null;const{xSnapped:$,ySnapped:T}=_e(R.sourceEvent,{transform:A,snapGrid:P,snapToGrid:L,containerBounds:w});y={width:u.measured.width??0,height:u.measured.height??0,x:u.position.x??0,y:u.position.y??0},x={...y,pointerX:$,pointerY:T,aspectRatio:y.width/y.height},C=void 0,u.parentId&&(u.extent==="parent"||u.expandParent)&&(C=k.get(u.parentId),M=C&&u.extent==="parent"?Jr(C):void 0),E=[],S=void 0;for(const[I,B]of k)if(B.parentId===t&&(E.push({id:I,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const D=ei(B,u,B.origin??H);S?S=[[Math.min(D[0][0],S[0][0]),Math.min(D[0][1],S[0][1])],[Math.max(D[1][0],S[1][0]),Math.max(D[1][1],S[1][1])]]:S=D}c==null||c(R,{...y})}).on("drag",R=>{const{transform:k,snapGrid:A,snapToGrid:P,nodeOrigin:L}=n(),H=_e(R.sourceEvent,{transform:k,snapGrid:A,snapToGrid:P,containerBounds:w}),j=[];if(!u)return;const{x:$,y:T,width:I,height:B}=y,D={},z=u.origin??L,{width:Y,height:O,x:q,y:K}=qr(x,b,H,h,f,z,M,S),U=Y!==I,V=O!==B,G=q!==$&&U,ee=K!==T&&V;if(!G&&!ee&&!U&&!V)return;if((G||ee||z[0]===1||z[1]===1)&&(D.x=G?q:y.x,D.y=ee?K:y.y,y.x=D.x,y.y=D.y,E.length>0)){const W=q-$,te=K-T;for(const se of E)se.position={x:se.position.x-W+z[0]*(Y-I),y:se.position.y-te+z[1]*(O-B)},j.push(se)}if((U||V)&&(D.width=U&&(!d||d==="horizontal")?Y:y.width,D.height=V&&(!d||d==="vertical")?O:y.height,y.width=D.width,y.height=D.height),C&&u.expandParent){const W=z[0]*(D.width??0);D.x&&D.x<W&&(y.x=W,x.x=x.x-(D.x-W));const te=z[1]*(D.height??0);D.y&&D.y<te&&(y.y=te,x.y=x.y-(D.y-te))}const Q=Kr({width:y.width,prevWidth:I,height:y.height,prevHeight:B,affectsX:b.affectsX,affectsY:b.affectsY}),X={...y,direction:Q};(p==null?void 0:p(R,X))!==!1&&(g==null||g(R,X),o(D,j))}).on("end",R=>{m==null||m(R,{...y}),s==null||s({...y})});r.call(_)}function a(){r.on(".drag",null)}return{update:i,destroy:a}}const at=N.createContext(null),ni=at.Provider,co=ce.error001();function J(e,t){const n=N.useContext(at);if(n===null)throw new Error(co);return Us(n,e,t)}function ne(){const e=N.useContext(at);if(e===null)throw new Error(co);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const cn={display:"none"},oi={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},lo="react-flow__node-desc",uo="react-flow__edge-desc",si="react-flow__aria-live",ri=e=>e.ariaLiveMessage,ii=e=>e.ariaLabelConfig;function ai({rfId:e}){const t=J(ri);return v.jsx("div",{id:`${si}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:oi,children:t})}function ci({rfId:e,disableKeyboardA11y:t}){const n=J(ii);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${lo}-${e}`,style:cn,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${uo}-${e}`,style:cn,children:n["edge.a11yDescription.default"]}),!t&&v.jsx(ai,{rfId:e})]})}const ct=N.forwardRef(({position:e="top-left",children:t,className:n,style:o,...s},r)=>{const i=`${e}`.split("-");return v.jsx("div",{className:re(["react-flow__panel",n,...i]),style:o,ref:r,...s,children:t})});ct.displayName="Panel";function li({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:v.jsx(ct,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const di=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Ze=e=>e.id;function ui(e,t){return oe(e.selectedNodes.map(Ze),t.selectedNodes.map(Ze))&&oe(e.selectedEdges.map(Ze),t.selectedEdges.map(Ze))}function fi({onSelectionChange:e}){const t=ne(),{selectedNodes:n,selectedEdges:o}=J(di,ui);return N.useEffect(()=>{const s={nodes:n,edges:o};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(r=>r(s))},[n,o,e]),null}const gi=e=>!!e.onSelectionChangeHandlers;function hi({onSelectionChange:e}){const t=J(gi);return e||t?v.jsx(fi,{onSelectionChange:e}):null}const fo=[0,0],pi={x:0,y:0,zoom:1},mi=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],ln=[...mi,"rfId"],yi=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),dn={translateExtent:Le,nodeOrigin:fo,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function xi(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:s,setTranslateExtent:r,setNodeExtent:i,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:h}=J(yi,oe),f=ne();N.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=dn,a()}),[]);const d=N.useRef(dn);return N.useEffect(()=>{for(const c of ln){const g=e[c],m=d.current[c];g!==m&&(typeof e[c]>"u"||(c==="nodes"?t(g):c==="edges"?n(g):c==="minZoom"?o(g):c==="maxZoom"?s(g):c==="translateExtent"?r(g):c==="nodeExtent"?i(g):c==="paneClickDistance"?h(g):c==="ariaLabelConfig"?f.setState({ariaLabelConfig:pr(g)}):c==="fitView"?f.setState({fitViewQueued:g}):c==="fitViewOptions"?f.setState({fitViewOptions:g}):f.setState({[c]:g})))}d.current=e},ln.map(c=>e[c])),null}function un(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function wi(e){var o;const[t,n]=N.useState(e==="system"?null:e);return N.useEffect(()=>{if(e!=="system"){n(e);return}const s=un(),r=()=>n(s!=null&&s.matches?"dark":"light");return r(),s==null||s.addEventListener("change",r),()=>{s==null||s.removeEventListener("change",r)}},[e]),t!==null?t:(o=un())!=null&&o.matches?"dark":"light"}const fn=typeof document<"u"?document:null;function Te(e=null,t={target:fn,actInsideInputWithModifier:!0}){const[n,o]=N.useState(!1),s=N.useRef(!1),r=N.useRef(new Set([])),[i,a]=N.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=h.reduce((d,c)=>d.concat(...c),[]);return[h,f]}return[[],[]]},[e]);return N.useEffect(()=>{const l=(t==null?void 0:t.target)??fn,h=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const f=g=>{var y,x;if(s.current=g.ctrlKey||g.metaKey||g.shiftKey||g.altKey,(!s.current||s.current&&!h)&&Xn(g))return!1;const p=hn(g.code,a);if(r.current.add(g[p]),gn(i,r.current,!1)){const b=((x=(y=g.composedPath)==null?void 0:y.call(g))==null?void 0:x[0])||g.target,u=(b==null?void 0:b.nodeName)==="BUTTON"||(b==null?void 0:b.nodeName)==="A";t.preventDefault!==!1&&(s.current||!u)&&g.preventDefault(),o(!0)}},d=g=>{const m=hn(g.code,a);gn(i,r.current,!0)?(o(!1),r.current.clear()):r.current.delete(g[m]),g.key==="Meta"&&r.current.clear(),s.current=!1},c=()=>{r.current.clear(),o(!1)};return l==null||l.addEventListener("keydown",f),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{l==null||l.removeEventListener("keydown",f),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}},[e,o]),n}function gn(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(s=>t.has(s)))}function hn(e,t){return t.includes(e)?"code":"key"}const bi=()=>{const e=ne();return N.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,s,r],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??o,y:t.y??s,zoom:t.zoom??r},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>e.getState().setCenter(t,n,o),fitBounds:async(t,n)=>{const{width:o,height:s,minZoom:r,maxZoom:i,panZoom:a}=e.getState(),l=kt(t,o,s,r,i,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:o,snapGrid:s,snapToGrid:r,domNode:i}=e.getState();if(!i)return t;const{x:a,y:l}=i.getBoundingClientRect(),h={x:t.x-a,y:t.y-l},f=n.snapGrid??s,d=n.snapToGrid??r;return ze(h,o,d,f)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:s,y:r}=o.getBoundingClientRect(),i=Qe(t,n);return{x:i.x+s,y:i.y+r}}}),[])};function go(e,t){const n=[],o=new Map,s=[];for(const r of e)if(r.type==="add"){s.push(r);continue}else if(r.type==="remove"||r.type==="replace")o.set(r.id,[r]);else{const i=o.get(r.id);i?i.push(r):o.set(r.id,[r])}for(const r of t){const i=o.get(r.id);if(!i){n.push(r);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const a={...r};for(const l of i)Ei(l,a);n.push(a)}return s.length&&s.forEach(r=>{r.index!==void 0?n.splice(r.index,0,{...r.item}):n.push({...r.item})}),n}function Ei(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function ho(e,t){return go(e,t)}function po(e,t){return go(e,t)}function pe(e,t){return{id:e,type:"select",selected:t}}function ve(e,t=new Set,n=!1){const o=[];for(const[s,r]of e){const i=t.has(s);!(r.selected===void 0&&!i)&&r.selected!==i&&(n&&(r.selected=i),o.push(pe(r.id,i)))}return o}function pn({items:e=[],lookup:t}){var s;const n=[],o=new Map(e.map(r=>[r.id,r]));for(const[r,i]of e.entries()){const a=t.get(i.id),l=((s=a==null?void 0:a.internals)==null?void 0:s.userNode)??a;l!==void 0&&l!==i&&n.push({id:i.id,item:i,type:"replace"}),l===void 0&&n.push({item:i,type:"add",index:r})}for(const[r]of t)o.get(r)===void 0&&n.push({id:r,type:"remove"});return n}function mn(e){return{id:e.id,type:"remove"}}const yn=e=>rr(e),vi=e=>Tn(e);function mo(e){return N.forwardRef(e)}const Ni=typeof window<"u"?N.useLayoutEffect:N.useEffect;function xn(e){const[t,n]=N.useState(BigInt(0)),[o]=N.useState(()=>Si(()=>n(s=>s+BigInt(1))));return Ni(()=>{const s=o.get();s.length&&(e(s),o.reset())},[t]),o}function Si(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const yo=N.createContext(null);function Ci({children:e}){const t=ne(),n=N.useCallback(a=>{const{nodes:l=[],setNodes:h,hasDefaultNodes:f,onNodesChange:d,nodeLookup:c,fitViewQueued:g}=t.getState();let m=l;for(const y of a)m=typeof y=="function"?y(m):y;const p=pn({items:m,lookup:c});f&&h(m),p.length>0?d==null||d(p):g&&window.requestAnimationFrame(()=>{const{fitViewQueued:y,nodes:x,setNodes:b}=t.getState();y&&b(x)})},[]),o=xn(n),s=N.useCallback(a=>{const{edges:l=[],setEdges:h,hasDefaultEdges:f,onEdgesChange:d,edgeLookup:c}=t.getState();let g=l;for(const m of a)g=typeof m=="function"?m(g):m;f?h(g):d&&d(pn({items:g,lookup:c}))},[]),r=xn(s),i=N.useMemo(()=>({nodeQueue:o,edgeQueue:r}),[]);return v.jsx(yo.Provider,{value:i,children:e})}function Mi(){const e=N.useContext(yo);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Ii=e=>!!e.panZoom;function Ht(){const e=bi(),t=ne(),n=Mi(),o=J(Ii),s=N.useMemo(()=>{const r=d=>t.getState().nodeLookup.get(d),i=d=>{n.nodeQueue.push(d)},a=d=>{n.edgeQueue.push(d)},l=d=>{var x,b;const{nodeLookup:c,nodeOrigin:g}=t.getState(),m=yn(d)?d:c.get(d.id),p=m.parentId?Yn(m.position,m.measured,m.parentId,c,g):m.position,y={...m,position:p,width:((x=m.measured)==null?void 0:x.width)??m.width,height:((b=m.measured)==null?void 0:b.height)??m.height};return Ce(y)},h=(d,c,g={replace:!1})=>{i(m=>m.map(p=>{if(p.id===d){const y=typeof c=="function"?c(p):c;return g.replace&&yn(y)?y:{...p,...y}}return p}))},f=(d,c,g={replace:!1})=>{a(m=>m.map(p=>{if(p.id===d){const y=typeof c=="function"?c(p):c;return g.replace&&vi(y)?y:{...p,...y}}return p}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var c;return(c=r(d))==null?void 0:c.internals.userNode},getInternalNode:r,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(c=>({...c}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:i,setEdges:a,addNodes:d=>{const c=Array.isArray(d)?d:[d];n.nodeQueue.push(g=>[...g,...c])},addEdges:d=>{const c=Array.isArray(d)?d:[d];n.edgeQueue.push(g=>[...g,...c])},toObject:()=>{const{nodes:d=[],edges:c=[],transform:g}=t.getState(),[m,p,y]=g;return{nodes:d.map(x=>({...x})),edges:c.map(x=>({...x})),viewport:{x:m,y:p,zoom:y}}},deleteElements:async({nodes:d=[],edges:c=[]})=>{const{nodes:g,edges:m,onNodesDelete:p,onEdgesDelete:y,triggerNodeChanges:x,triggerEdgeChanges:b,onDelete:u,onBeforeDelete:w}=t.getState(),{nodes:E,edges:C}=await dr({nodesToRemove:d,edgesToRemove:c,nodes:g,edges:m,onBeforeDelete:w}),M=C.length>0,S=E.length>0;if(M){const _=C.map(mn);y==null||y(C),b(_)}if(S){const _=E.map(mn);p==null||p(E),x(_)}return(S||M)&&(u==null||u({nodes:E,edges:C})),{deletedNodes:E,deletedEdges:C}},getIntersectingNodes:(d,c=!0,g)=>{const m=Kt(d),p=m?d:l(d),y=g!==void 0;return p?(g||t.getState().nodes).filter(x=>{const b=t.getState().nodeLookup.get(x.id);if(b&&!m&&(x.id===d.id||!b.internals.positionAbsolute))return!1;const u=Ce(y?x:b),w=je(u,p);return c&&w>0||w>=u.width*u.height||w>=p.width*p.height}):[]},isNodeIntersecting:(d,c,g=!0)=>{const p=Kt(d)?d:l(d);if(!p)return!1;const y=je(p,c);return g&&y>0||y>=p.width*p.height},updateNode:h,updateNodeData:(d,c,g={replace:!1})=>{h(d,m=>{const p=typeof c=="function"?c(m):c;return g.replace?{...m,data:p}:{...m,data:{...m.data,...p}}},g)},updateEdge:f,updateEdgeData:(d,c,g={replace:!1})=>{f(d,m=>{const p=typeof c=="function"?c(m):c;return g.replace?{...m,data:p}:{...m,data:{...m.data,...p}}},g)},getNodesBounds:d=>{const{nodeLookup:c,nodeOrigin:g}=t.getState();return ir(d,{nodeLookup:c,nodeOrigin:g})},getHandleConnections:({type:d,id:c,nodeId:g})=>{var m;return Array.from(((m=t.getState().connectionLookup.get(`${g}-${d}${c?`-${c}`:""}`))==null?void 0:m.values())??[])},getNodeConnections:({type:d,handleId:c,nodeId:g})=>{var m;return Array.from(((m=t.getState().connectionLookup.get(`${g}${d?c?`-${d}-${c}`:`-${d}`:""}`))==null?void 0:m.values())??[])},fitView:async d=>{const c=t.getState().fitViewResolver??hr();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:c}),n.nodeQueue.push(g=>[...g]),c.promise}}},[]);return N.useMemo(()=>({...s,...e,viewportInitialized:o}),[o])}const wn=e=>e.selected,ki=typeof window<"u"?window:void 0;function Ai({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ne(),{deleteElements:o}=Ht(),s=Te(e,{actInsideInputWithModifier:!1}),r=Te(t,{target:ki});N.useEffect(()=>{if(s){const{edges:i,nodes:a}=n.getState();o({nodes:a.filter(wn),edges:i.filter(wn)}),n.setState({nodesSelectionActive:!1})}},[s]),N.useEffect(()=>{n.setState({multiSelectionActive:r})},[r])}function Pi(e){const t=ne();N.useEffect(()=>{const n=()=>{var s,r;if(!e.current)return!1;const o=At(e.current);(o.height===0||o.width===0)&&((r=(s=t.getState()).onError)==null||r.call(s,"004",ce.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const lt={position:"absolute",width:"100%",height:"100%",top:0,left:0},$i=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function _i({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:r=me.Free,zoomOnDoubleClick:i=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:h,minZoom:f,maxZoom:d,zoomActivationKeyCode:c,preventScrolling:g=!0,children:m,noWheelClassName:p,noPanClassName:y,onViewportChange:x,isControlledViewport:b,paneClickDistance:u}){const w=ne(),E=N.useRef(null),{userSelectionActive:C,lib:M}=J($i,oe),S=Te(c),_=N.useRef();Pi(E);const R=N.useCallback(k=>{x==null||x({x:k[0],y:k[1],zoom:k[2]}),b||w.setState({transform:k})},[x,b]);return N.useEffect(()=>{if(E.current){_.current=Zr({domNode:E.current,minZoom:f,maxZoom:d,translateExtent:h,viewport:l,paneClickDistance:u,onDraggingChange:L=>w.setState({paneDragging:L}),onPanZoomStart:(L,H)=>{const{onViewportChangeStart:j,onMoveStart:$}=w.getState();$==null||$(L,H),j==null||j(H)},onPanZoom:(L,H)=>{const{onViewportChange:j,onMove:$}=w.getState();$==null||$(L,H),j==null||j(H)},onPanZoomEnd:(L,H)=>{const{onViewportChangeEnd:j,onMoveEnd:$}=w.getState();$==null||$(L,H),j==null||j(H)}});const{x:k,y:A,zoom:P}=_.current.getViewport();return w.setState({panZoom:_.current,transform:[k,A,P],domNode:E.current.closest(".react-flow")}),()=>{var L;(L=_.current)==null||L.destroy()}}},[]),N.useEffect(()=>{var k;(k=_.current)==null||k.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:s,panOnScrollMode:r,zoomOnDoubleClick:i,panOnDrag:a,zoomActivationKeyPressed:S,preventScrolling:g,noPanClassName:y,userSelectionActive:C,noWheelClassName:p,lib:M,onTransformChange:R})},[e,t,n,o,s,r,i,a,S,g,y,C,p,M,R]),v.jsx("div",{className:"react-flow__renderer",ref:E,style:lt,children:m})}const Li=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Hi(){const{userSelectionActive:e,userSelectionRect:t}=J(Li,oe);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const xt=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},ji=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Di({isSelecting:e,selectionKeyPressed:t,selectionMode:n=He.Full,panOnDrag:o,selectionOnDrag:s,onSelectionStart:r,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:c,children:g}){const m=ne(),{userSelectionActive:p,elementsSelectable:y,dragging:x,connectionInProgress:b}=J(ji,oe),u=y&&(e||p),w=N.useRef(null),E=N.useRef(),C=N.useRef(new Set),M=N.useRef(new Set),S=N.useRef(!1),_=N.useRef(!1),R=$=>{if(S.current||b){S.current=!1;return}a==null||a($),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},k=$=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){$.preventDefault();return}l==null||l($)},A=h?$=>h($):void 0,P=$=>{var z,Y;const{resetSelectedElements:T,domNode:I}=m.getState();if(E.current=I==null?void 0:I.getBoundingClientRect(),!y||!e||$.button!==0||$.target!==w.current||!E.current)return;(Y=(z=$.target)==null?void 0:z.setPointerCapture)==null||Y.call(z,$.pointerId),_.current=!0,S.current=!1;const{x:B,y:D}=ae($.nativeEvent,E.current);T(),m.setState({userSelectionRect:{width:0,height:0,startX:B,startY:D,x:B,y:D}}),r==null||r($)},L=$=>{const{userSelectionRect:T,transform:I,nodeLookup:B,edgeLookup:D,connectionLookup:z,triggerNodeChanges:Y,triggerEdgeChanges:O,defaultEdgeOptions:q}=m.getState();if(!E.current||!T)return;S.current=!0;const{x:K,y:U}=ae($.nativeEvent,E.current),{startX:V,startY:G}=T,ee={startX:V,startY:G,x:K<V?K:V,y:U<G?U:G,width:Math.abs(K-V),height:Math.abs(U-G)},Q=C.current,X=M.current;C.current=new Set(It(B,ee,I,n===He.Partial,!0).map(W=>W.id)),M.current=new Set;const Z=(q==null?void 0:q.selectable)??!0;for(const W of C.current){const te=z.get(W);if(te)for(const{edgeId:se}of te.values()){const le=D.get(se);le&&(le.selectable??Z)&&M.current.add(se)}}if(!Ut(Q,C.current)){const W=ve(B,C.current,!0);Y(W)}if(!Ut(X,M.current)){const W=ve(D,M.current);O(W)}m.setState({userSelectionRect:ee,userSelectionActive:!0,nodesSelectionActive:!1})},H=$=>{var I,B;if($.button!==0||!_.current)return;(B=(I=$.target)==null?void 0:I.releasePointerCapture)==null||B.call(I,$.pointerId);const{userSelectionRect:T}=m.getState();!p&&T&&$.target===w.current&&(R==null||R($)),m.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:C.current.size>0}),i==null||i($),(t||s)&&(S.current=!1),_.current=!1},j=o===!0||Array.isArray(o)&&o.includes(0);return v.jsxs("div",{className:re(["react-flow__pane",{draggable:j,dragging:x,selection:e}]),onClick:u?void 0:xt(R,w),onContextMenu:xt(k,w),onWheel:xt(A,w),onPointerEnter:u?void 0:f,onPointerDown:u?P:d,onPointerMove:u?L:d,onPointerUp:u?H:void 0,onPointerLeave:c,ref:w,style:lt,children:[g,v.jsx(Hi,{})]})}function Ct({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:r,multiSelectionActive:i,nodeLookup:a,onError:l}=t.getState(),h=a.get(e);if(!h){l==null||l("012",ce.error012(e));return}t.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&i)&&(r({nodes:[h],edges:[]}),requestAnimationFrame(()=>{var f;return(f=o==null?void 0:o.current)==null?void 0:f.blur()})):s([e])}function xo({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:s,isSelectable:r,nodeClickDistance:i}){const a=ne(),[l,h]=N.useState(!1),f=N.useRef();return N.useEffect(()=>{f.current=Lr({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{Ct({id:d,store:a,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),N.useEffect(()=>{var d,c;if(t)(d=f.current)==null||d.destroy();else if(e.current)return(c=f.current)==null||c.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:r,nodeId:s,nodeClickDistance:i}),()=>{var g;(g=f.current)==null||g.destroy()}},[n,o,t,r,e,s]),l}const Ti=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function wo(){const e=ne();return N.useCallback(n=>{const{nodeExtent:o,snapToGrid:s,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:l,nodeLookup:h,nodeOrigin:f}=e.getState(),d=new Map,c=Ti(i),g=s?r[0]:5,m=s?r[1]:5,p=n.direction.x*g*n.factor,y=n.direction.y*m*n.factor;for(const[,x]of h){if(!c(x))continue;let b={x:x.internals.positionAbsolute.x+p,y:x.internals.positionAbsolute.y+y};s&&(b=rt(b,r));const{position:u,positionAbsolute:w}=Bn({nodeId:x.id,nextPosition:b,nodeLookup:h,nodeExtent:o,nodeOrigin:f,onError:a});x.position=u,x.internals.positionAbsolute=w,d.set(x.id,x)}l(d)},[])}const jt=N.createContext(null),Bi=jt.Provider;jt.Consumer;const bo=()=>N.useContext(jt),Ri=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),zi=(e,t,n)=>o=>{const{connectionClickStartHandle:s,connectionMode:r,connection:i}=o,{fromHandle:a,toHandle:l,isValid:h}=i,f=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:f,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:r===Ne.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!s,valid:f&&h}};function Vi({type:e="source",position:t=F.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:r=!0,id:i,onConnect:a,children:l,className:h,onMouseDown:f,onTouchStart:d,...c},g){var H,j;const m=i||null,p=e==="target",y=ne(),x=bo(),{connectOnClick:b,noPanClassName:u,rfId:w}=J(Ri,oe),{connectingFrom:E,connectingTo:C,clickConnecting:M,isPossibleEndHandle:S,connectionInProcess:_,clickConnectionInProcess:R,valid:k}=J(zi(x,m,e),oe);x||(j=(H=y.getState()).onError)==null||j.call(H,"010",ce.error010());const A=$=>{const{defaultEdgeOptions:T,onConnect:I,hasDefaultEdges:B}=y.getState(),D={...T,...$};if(B){const{edges:z,setEdges:Y}=y.getState();Y(Un(D,z))}I==null||I(D),a==null||a(D)},P=$=>{if(!x)return;const T=Wn($.nativeEvent);if(s&&(T&&$.button===0||!T)){const I=y.getState();St.onPointerDown($.nativeEvent,{autoPanOnConnect:I.autoPanOnConnect,connectionMode:I.connectionMode,connectionRadius:I.connectionRadius,domNode:I.domNode,nodeLookup:I.nodeLookup,lib:I.lib,isTarget:p,handleId:m,nodeId:x,flowId:I.rfId,panBy:I.panBy,cancelConnection:I.cancelConnection,onConnectStart:I.onConnectStart,onConnectEnd:I.onConnectEnd,updateConnection:I.updateConnection,onConnect:A,isValidConnection:n||I.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:I.autoPanSpeed,dragThreshold:I.connectionDragThreshold})}T?f==null||f($):d==null||d($)},L=$=>{const{onClickConnectStart:T,onClickConnectEnd:I,connectionClickStartHandle:B,connectionMode:D,isValidConnection:z,lib:Y,rfId:O,nodeLookup:q,connection:K}=y.getState();if(!x||!B&&!s)return;if(!B){T==null||T($.nativeEvent,{nodeId:x,handleId:m,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:x,type:e,id:m}});return}const U=On($.target),V=n||z,{connection:G,isValid:ee}=St.isValid($.nativeEvent,{handle:{nodeId:x,id:m,type:e},connectionMode:D,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:V,flowId:O,doc:U,lib:Y,nodeLookup:q});ee&&G&&A(G);const Q=structuredClone(K);delete Q.inProgress,Q.toPosition=Q.toHandle?Q.toHandle.position:null,I==null||I($,Q),y.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":m,"data-nodeid":x,"data-handlepos":t,"data-id":`${w}-${x}-${m}-${e}`,className:re(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",u,h,{source:!p,target:p,connectable:o,connectablestart:s,connectableend:r,clickconnecting:M,connectingfrom:E,connectingto:C,valid:k,connectionindicator:o&&(!_||S)&&(_||R?r:s)}]),onMouseDown:P,onTouchStart:P,onClick:b?L:void 0,ref:g,...c,children:l})}const et=N.memo(mo(Vi));function Fi({data:e,isConnectable:t,sourcePosition:n=F.Bottom}){return v.jsxs(v.Fragment,{children:[e==null?void 0:e.label,v.jsx(et,{type:"source",position:n,isConnectable:t})]})}function Yi({data:e,isConnectable:t,targetPosition:n=F.Top,sourcePosition:o=F.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(et,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,v.jsx(et,{type:"source",position:o,isConnectable:t})]})}function Oi(){return null}function Xi({data:e,isConnectable:t,targetPosition:n=F.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(et,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const tt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},bn={input:Fi,default:Yi,output:Xi,group:Oi};function Wi(e){var t,n,o,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const Gi=e=>{const{width:t,height:n,x:o,y:s}=Re(e.nodeLookup,{filter:r=>!!r.selected});return{width:ie(t)?t:null,height:ie(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${s}px)`}};function Zi({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ne(),{width:s,height:r,transformString:i,userSelectionActive:a}=J(Gi,oe),l=wo(),h=N.useRef(null);if(N.useEffect(()=>{var c;n||(c=h.current)==null||c.focus({preventScroll:!0})},[n]),xo({nodeRef:h}),a||!s||!r)return null;const f=e?c=>{const g=o.getState().nodes.filter(m=>m.selected);e(c,g)}:void 0,d=c=>{Object.prototype.hasOwnProperty.call(tt,c.key)&&(c.preventDefault(),l({direction:tt[c.key],factor:c.shiftKey?4:1}))};return v.jsx("div",{className:re(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:v.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:s,height:r}})})}const En=typeof window<"u"?window:void 0,Ki=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Eo({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:r,onPaneScroll:i,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:h,selectionOnDrag:f,selectionMode:d,onSelectionStart:c,onSelectionEnd:g,multiSelectionKeyCode:m,panActivationKeyCode:p,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:b,zoomOnPinch:u,panOnScroll:w,panOnScrollSpeed:E,panOnScrollMode:C,zoomOnDoubleClick:M,panOnDrag:S,defaultViewport:_,translateExtent:R,minZoom:k,maxZoom:A,preventScrolling:P,onSelectionContextMenu:L,noWheelClassName:H,noPanClassName:j,disableKeyboardA11y:$,onViewportChange:T,isControlledViewport:I}){const{nodesSelectionActive:B,userSelectionActive:D}=J(Ki),z=Te(h,{target:En}),Y=Te(p,{target:En}),O=Y||S,q=Y||w,K=f&&O!==!0,U=z||D||K;return Ai({deleteKeyCode:l,multiSelectionKeyCode:m}),v.jsx(_i,{onPaneContextMenu:r,elementsSelectable:x,zoomOnScroll:b,zoomOnPinch:u,panOnScroll:q,panOnScrollSpeed:E,panOnScrollMode:C,zoomOnDoubleClick:M,panOnDrag:!z&&O,defaultViewport:_,translateExtent:R,minZoom:k,maxZoom:A,zoomActivationKeyCode:y,preventScrolling:P,noWheelClassName:H,noPanClassName:j,onViewportChange:T,isControlledViewport:I,paneClickDistance:a,children:v.jsxs(Di,{onSelectionStart:c,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:r,onPaneScroll:i,panOnDrag:O,isSelecting:!!U,selectionMode:d,selectionKeyPressed:z,selectionOnDrag:K,children:[e,B&&v.jsx(Zi,{onSelectionContextMenu:L,noPanClassName:j,disableKeyboardA11y:$})]})})}Eo.displayName="FlowRenderer";const Ui=N.memo(Eo),qi=e=>t=>e?It(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Qi(e){return J(N.useCallback(qi(e),[e]),oe)}const Ji=e=>e.updateNodeInternals;function ea(){const e=J(Ji),[t]=N.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(s=>{const r=s.target.getAttribute("data-id");o.set(r,{id:r,nodeElement:s.target,force:!0})}),e(o)}));return N.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function ta({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const s=ne(),r=N.useRef(null),i=N.useRef(null),a=N.useRef(e.sourcePosition),l=N.useRef(e.targetPosition),h=N.useRef(t),f=n&&!!e.internals.handleBounds;return N.useEffect(()=>{r.current&&!e.hidden&&(!f||i.current!==r.current)&&(i.current&&(o==null||o.unobserve(i.current)),o==null||o.observe(r.current),i.current=r.current)},[f,e.hidden]),N.useEffect(()=>()=>{i.current&&(o==null||o.unobserve(i.current),i.current=null)},[]),N.useEffect(()=>{if(r.current){const d=h.current!==t,c=a.current!==e.sourcePosition,g=l.current!==e.targetPosition;(d||c||g)&&(h.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:r.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),r}function na({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:s,onContextMenu:r,onDoubleClick:i,nodesDraggable:a,elementsSelectable:l,nodesConnectable:h,nodesFocusable:f,resizeObserver:d,noDragClassName:c,noPanClassName:g,disableKeyboardA11y:m,rfId:p,nodeTypes:y,nodeClickDistance:x,onError:b}){const{node:u,internals:w,isParent:E}=J(V=>{const G=V.nodeLookup.get(e),ee=V.parentLookup.has(e);return{node:G,internals:G.internals,isParent:ee}},oe);let C=u.type||"default",M=(y==null?void 0:y[C])||bn[C];M===void 0&&(b==null||b("003",ce.error003(C)),C="default",M=(y==null?void 0:y.default)||bn.default);const S=!!(u.draggable||a&&typeof u.draggable>"u"),_=!!(u.selectable||l&&typeof u.selectable>"u"),R=!!(u.connectable||h&&typeof u.connectable>"u"),k=!!(u.focusable||f&&typeof u.focusable>"u"),A=ne(),P=Fn(u),L=ta({node:u,nodeType:C,hasDimensions:P,resizeObserver:d}),H=xo({nodeRef:L,disabled:u.hidden||!S,noDragClassName:c,handleSelector:u.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:x}),j=wo();if(u.hidden)return null;const $=de(u),T=Wi(u),I=_||S||t||n||o||s,B=n?V=>n(V,{...w.userNode}):void 0,D=o?V=>o(V,{...w.userNode}):void 0,z=s?V=>s(V,{...w.userNode}):void 0,Y=r?V=>r(V,{...w.userNode}):void 0,O=i?V=>i(V,{...w.userNode}):void 0,q=V=>{const{selectNodesOnDrag:G,nodeDragThreshold:ee}=A.getState();_&&(!G||!S||ee>0)&&Ct({id:e,store:A,nodeRef:L}),t&&t(V,{...w.userNode})},K=V=>{if(!(Xn(V.nativeEvent)||m)){if(Ln.includes(V.key)&&_){const G=V.key==="Escape";Ct({id:e,store:A,unselect:G,nodeRef:L})}else if(S&&u.selected&&Object.prototype.hasOwnProperty.call(tt,V.key)){V.preventDefault();const{ariaLabelConfig:G}=A.getState();A.setState({ariaLiveMessage:G["node.a11yDescription.ariaLiveMessage"]({direction:V.key.replace("Arrow","").toLowerCase(),x:~~w.positionAbsolute.x,y:~~w.positionAbsolute.y})}),j({direction:tt[V.key],factor:V.shiftKey?4:1})}}},U=()=>{var W;if(m||!((W=L.current)!=null&&W.matches(":focus-visible")))return;const{transform:V,width:G,height:ee,autoPanOnNodeFocus:Q,setCenter:X}=A.getState();if(!Q)return;It(new Map([[e,u]]),{x:0,y:0,width:G,height:ee},V,!0).length>0||X(u.position.x+$.width/2,u.position.y+$.height/2,{zoom:V[2]})};return v.jsx("div",{className:re(["react-flow__node",`react-flow__node-${C}`,{[g]:S},u.className,{selected:u.selected,selectable:_,parent:E,draggable:S,dragging:H}]),ref:L,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:I?"all":"none",visibility:P?"visible":"hidden",...u.style,...T},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:D,onMouseLeave:z,onContextMenu:Y,onClick:q,onDoubleClick:O,onKeyDown:k?K:void 0,tabIndex:k?0:void 0,onFocus:k?U:void 0,role:u.ariaRole??(k?"group":void 0),"aria-roledescription":"node","aria-describedby":m?void 0:`${lo}-${p}`,"aria-label":u.ariaLabel,...u.domAttributes,children:v.jsx(Bi,{value:e,children:v.jsx(M,{id:e,data:u.data,type:C,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:u.selected??!1,selectable:_,draggable:S,deletable:u.deletable??!0,isConnectable:R,sourcePosition:u.sourcePosition,targetPosition:u.targetPosition,dragging:H,dragHandle:u.dragHandle,zIndex:w.z,parentId:u.parentId,...$})})})}const oa=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function vo(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:s,onError:r}=J(oa,oe),i=Qi(e.onlyRenderVisibleElements),a=ea();return v.jsx("div",{className:"react-flow__nodes",style:lt,children:i.map(l=>v.jsx(na,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:r},l))})}vo.displayName="NodeRenderer";const sa=N.memo(vo);function ra(e){return J(N.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const o=[];if(n.width&&n.height)for(const s of n.edges){const r=n.nodeLookup.get(s.source),i=n.nodeLookup.get(s.target);r&&i&&xr({sourceNode:r,targetNode:i,width:n.width,height:n.height,transform:n.transform})&&o.push(s.id)}return o},[e]),oe)}const ia=({color:e="none",strokeWidth:t=1})=>v.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),aa=({color:e="none",strokeWidth:t=1})=>v.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),vn={[Ue.Arrow]:ia,[Ue.ArrowClosed]:aa};function ca(e){const t=ne();return N.useMemo(()=>{var s,r;return Object.prototype.hasOwnProperty.call(vn,e)?vn[e]:((r=(s=t.getState()).onError)==null||r.call(s,"009",ce.error009(e)),null)},[e])}const la=({id:e,type:t,color:n,width:o=12.5,height:s=12.5,markerUnits:r="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const l=ca(t);return l?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:r,orient:a,refX:"0",refY:"0",children:v.jsx(l,{color:n,strokeWidth:i})}):null},No=({defaultColor:e,rfId:t})=>{const n=J(r=>r.edges),o=J(r=>r.defaultEdgeOptions),s=N.useMemo(()=>Cr(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return s.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:s.map(r=>v.jsx(la,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})}):null};No.displayName="MarkerDefinitions";var da=N.memo(No);function So({x:e,y:t,label:n,labelStyle:o,labelShowBg:s=!0,labelBgStyle:r,labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:h,...f}){const[d,c]=N.useState({x:1,y:0,width:0,height:0}),g=re(["react-flow__edge-textwrapper",h]),m=N.useRef(null);return N.useEffect(()=>{if(m.current){const p=m.current.getBBox();c({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),n?v.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:g,visibility:d.width?"visible":"hidden",...f,children:[s&&v.jsx("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:r,rx:a,ry:a}),v.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:m,style:o,children:n}),l]}):null}So.displayName="EdgeText";const ua=N.memo(So);function dt({path:e,labelX:t,labelY:n,label:o,labelStyle:s,labelShowBg:r,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:h=20,...f}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...f,d:e,fill:"none",className:re(["react-flow__edge-path",f.className])}),h&&v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),o&&ie(t)&&ie(n)?v.jsx(ua,{x:t,y:n,label:o,labelStyle:s,labelShowBg:r,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function Nn({pos:e,x1:t,y1:n,x2:o,y2:s}){return e===F.Left||e===F.Right?[.5*(t+o),n]:[t,.5*(n+s)]}function Co({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:o,targetY:s,targetPosition:r=F.Top}){const[i,a]=Nn({pos:n,x1:e,y1:t,x2:o,y2:s}),[l,h]=Nn({pos:r,x1:o,y1:s,x2:e,y2:t}),[f,d,c,g]=Gn({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:h});return[`M${e},${t} C${i},${a} ${l},${h} ${o},${s}`,f,d,c,g]}function Mo(e){return N.memo(({id:t,sourceX:n,sourceY:o,targetX:s,targetY:r,sourcePosition:i,targetPosition:a,label:l,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:g,style:m,markerEnd:p,markerStart:y,interactionWidth:x})=>{const[b,u,w]=Co({sourceX:n,sourceY:o,sourcePosition:i,targetX:s,targetY:r,targetPosition:a}),E=e.isInternal?void 0:t;return v.jsx(dt,{id:E,path:b,labelX:u,labelY:w,label:l,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:g,style:m,markerEnd:p,markerStart:y,interactionWidth:x})})}const fa=Mo({isInternal:!1}),Io=Mo({isInternal:!0});fa.displayName="SimpleBezierEdge";Io.displayName="SimpleBezierEdgeInternal";function ko(e){return N.memo(({id:t,sourceX:n,sourceY:o,targetX:s,targetY:r,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:c,sourcePosition:g=F.Bottom,targetPosition:m=F.Top,markerEnd:p,markerStart:y,pathOptions:x,interactionWidth:b})=>{const[u,w,E]=Et({sourceX:n,sourceY:o,sourcePosition:g,targetX:s,targetY:r,targetPosition:m,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset,stepPosition:x==null?void 0:x.stepPosition}),C=e.isInternal?void 0:t;return v.jsx(dt,{id:C,path:u,labelX:w,labelY:E,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:c,markerEnd:p,markerStart:y,interactionWidth:b})})}const Ao=ko({isInternal:!1}),Po=ko({isInternal:!0});Ao.displayName="SmoothStepEdge";Po.displayName="SmoothStepEdgeInternal";function $o(e){return N.memo(({id:t,...n})=>{var s;const o=e.isInternal?void 0:t;return v.jsx(Ao,{...n,id:o,pathOptions:N.useMemo(()=>{var r;return{borderRadius:0,offset:(r=n.pathOptions)==null?void 0:r.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const ga=$o({isInternal:!1}),_o=$o({isInternal:!0});ga.displayName="StepEdge";_o.displayName="StepEdgeInternal";function Lo(e){return N.memo(({id:t,sourceX:n,sourceY:o,targetX:s,targetY:r,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:c,markerEnd:g,markerStart:m,interactionWidth:p})=>{const[y,x,b]=qn({sourceX:n,sourceY:o,targetX:s,targetY:r}),u=e.isInternal?void 0:t;return v.jsx(dt,{id:u,path:y,labelX:x,labelY:b,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:c,markerEnd:g,markerStart:m,interactionWidth:p})})}const ha=Lo({isInternal:!1}),Ho=Lo({isInternal:!0});ha.displayName="StraightEdge";Ho.displayName="StraightEdgeInternal";function jo(e){return N.memo(({id:t,sourceX:n,sourceY:o,targetX:s,targetY:r,sourcePosition:i=F.Bottom,targetPosition:a=F.Top,label:l,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:g,style:m,markerEnd:p,markerStart:y,pathOptions:x,interactionWidth:b})=>{const[u,w,E]=Zn({sourceX:n,sourceY:o,sourcePosition:i,targetX:s,targetY:r,targetPosition:a,curvature:x==null?void 0:x.curvature}),C=e.isInternal?void 0:t;return v.jsx(dt,{id:C,path:u,labelX:w,labelY:E,label:l,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:g,style:m,markerEnd:p,markerStart:y,interactionWidth:b})})}const pa=jo({isInternal:!1}),Do=jo({isInternal:!0});pa.displayName="BezierEdge";Do.displayName="BezierEdgeInternal";const Sn={default:Do,straight:Ho,step:_o,smoothstep:Po,simplebezier:Io},Cn={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ma=(e,t,n)=>n===F.Left?e-t:n===F.Right?e+t:e,ya=(e,t,n)=>n===F.Top?e-t:n===F.Bottom?e+t:e,Mn="react-flow__edgeupdater";function In({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:s,onMouseEnter:r,onMouseOut:i,type:a}){return v.jsx("circle",{onMouseDown:s,onMouseEnter:r,onMouseOut:i,className:re([Mn,`${Mn}-${a}`]),cx:ma(t,o,e),cy:ya(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function xa({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:s,targetX:r,targetY:i,sourcePosition:a,targetPosition:l,onReconnect:h,onReconnectStart:f,onReconnectEnd:d,setReconnecting:c,setUpdateHover:g}){const m=ne(),p=(w,E)=>{if(w.button!==0)return;const{autoPanOnConnect:C,domNode:M,isValidConnection:S,connectionMode:_,connectionRadius:R,lib:k,onConnectStart:A,onConnectEnd:P,cancelConnection:L,nodeLookup:H,rfId:j,panBy:$,updateConnection:T}=m.getState(),I=E.type==="target",B=(Y,O)=>{c(!1),d==null||d(Y,n,E.type,O)},D=Y=>h==null?void 0:h(n,Y),z=(Y,O)=>{c(!0),f==null||f(w,n,E.type),A==null||A(Y,O)};St.onPointerDown(w.nativeEvent,{autoPanOnConnect:C,connectionMode:_,connectionRadius:R,domNode:M,handleId:E.id,nodeId:E.nodeId,nodeLookup:H,isTarget:I,edgeUpdaterType:E.type,lib:k,flowId:j,cancelConnection:L,panBy:$,isValidConnection:S,onConnect:D,onConnectStart:z,onConnectEnd:P,onReconnectEnd:B,updateConnection:T,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold})},y=w=>p(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=w=>p(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),b=()=>g(!0),u=()=>g(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(In,{position:a,centerX:o,centerY:s,radius:t,onMouseDown:y,onMouseEnter:b,onMouseOut:u,type:"source"}),(e===!0||e==="target")&&v.jsx(In,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:x,onMouseEnter:b,onMouseOut:u,type:"target"})]})}function wa({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:s,onDoubleClick:r,onContextMenu:i,onMouseEnter:a,onMouseMove:l,onMouseLeave:h,reconnectRadius:f,onReconnect:d,onReconnectStart:c,onReconnectEnd:g,rfId:m,edgeTypes:p,noPanClassName:y,onError:x,disableKeyboardA11y:b}){let u=J(X=>X.edgeLookup.get(e));const w=J(X=>X.defaultEdgeOptions);u=w?{...w,...u}:u;let E=u.type||"default",C=(p==null?void 0:p[E])||Sn[E];C===void 0&&(x==null||x("011",ce.error011(E)),E="default",C=(p==null?void 0:p.default)||Sn.default);const M=!!(u.focusable||t&&typeof u.focusable>"u"),S=typeof d<"u"&&(u.reconnectable||n&&typeof u.reconnectable>"u"),_=!!(u.selectable||o&&typeof u.selectable>"u"),R=N.useRef(null),[k,A]=N.useState(!1),[P,L]=N.useState(!1),H=ne(),{zIndex:j,sourceX:$,sourceY:T,targetX:I,targetY:B,sourcePosition:D,targetPosition:z}=J(N.useCallback(X=>{const Z=X.nodeLookup.get(u.source),W=X.nodeLookup.get(u.target);if(!Z||!W)return{zIndex:u.zIndex,...Cn};const te=Sr({id:e,sourceNode:Z,targetNode:W,sourceHandle:u.sourceHandle||null,targetHandle:u.targetHandle||null,connectionMode:X.connectionMode,onError:x});return{zIndex:yr({selected:u.selected,zIndex:u.zIndex,sourceNode:Z,targetNode:W,elevateOnSelect:X.elevateEdgesOnSelect}),...te||Cn}},[u.source,u.target,u.sourceHandle,u.targetHandle,u.selected,u.zIndex]),oe),Y=N.useMemo(()=>u.markerStart?`url('#${vt(u.markerStart,m)}')`:void 0,[u.markerStart,m]),O=N.useMemo(()=>u.markerEnd?`url('#${vt(u.markerEnd,m)}')`:void 0,[u.markerEnd,m]);if(u.hidden||$===null||T===null||I===null||B===null)return null;const q=X=>{var se;const{addSelectedEdges:Z,unselectNodesAndEdges:W,multiSelectionActive:te}=H.getState();_&&(H.setState({nodesSelectionActive:!1}),u.selected&&te?(W({nodes:[],edges:[u]}),(se=R.current)==null||se.blur()):Z([e])),s&&s(X,u)},K=r?X=>{r(X,{...u})}:void 0,U=i?X=>{i(X,{...u})}:void 0,V=a?X=>{a(X,{...u})}:void 0,G=l?X=>{l(X,{...u})}:void 0,ee=h?X=>{h(X,{...u})}:void 0,Q=X=>{var Z;if(!b&&Ln.includes(X.key)&&_){const{unselectNodesAndEdges:W,addSelectedEdges:te}=H.getState();X.key==="Escape"?((Z=R.current)==null||Z.blur(),W({edges:[u]})):te([e])}};return v.jsx("svg",{style:{zIndex:j},children:v.jsxs("g",{className:re(["react-flow__edge",`react-flow__edge-${E}`,u.className,y,{selected:u.selected,animated:u.animated,inactive:!_&&!s,updating:k,selectable:_}]),onClick:q,onDoubleClick:K,onContextMenu:U,onMouseEnter:V,onMouseMove:G,onMouseLeave:ee,onKeyDown:M?Q:void 0,tabIndex:M?0:void 0,role:u.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":u.ariaLabel===null?void 0:u.ariaLabel||`Edge from ${u.source} to ${u.target}`,"aria-describedby":M?`${uo}-${m}`:void 0,ref:R,...u.domAttributes,children:[!P&&v.jsx(C,{id:e,source:u.source,target:u.target,type:u.type,selected:u.selected,animated:u.animated,selectable:_,deletable:u.deletable??!0,label:u.label,labelStyle:u.labelStyle,labelShowBg:u.labelShowBg,labelBgStyle:u.labelBgStyle,labelBgPadding:u.labelBgPadding,labelBgBorderRadius:u.labelBgBorderRadius,sourceX:$,sourceY:T,targetX:I,targetY:B,sourcePosition:D,targetPosition:z,data:u.data,style:u.style,sourceHandleId:u.sourceHandle,targetHandleId:u.targetHandle,markerStart:Y,markerEnd:O,pathOptions:"pathOptions"in u?u.pathOptions:void 0,interactionWidth:u.interactionWidth}),S&&v.jsx(xa,{edge:u,isReconnectable:S,reconnectRadius:f,onReconnect:d,onReconnectStart:c,onReconnectEnd:g,sourceX:$,sourceY:T,targetX:I,targetY:B,sourcePosition:D,targetPosition:z,setUpdateHover:A,setReconnecting:L})]})})}const ba=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function To({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:s,onReconnect:r,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:d,onEdgeDoubleClick:c,onReconnectStart:g,onReconnectEnd:m,disableKeyboardA11y:p}){const{edgesFocusable:y,edgesReconnectable:x,elementsSelectable:b,onError:u}=J(ba,oe),w=ra(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(da,{defaultColor:e,rfId:n}),w.map(E=>v.jsx(wa,{id:E,edgesFocusable:y,edgesReconnectable:x,elementsSelectable:b,noPanClassName:s,onReconnect:r,onContextMenu:i,onMouseEnter:a,onMouseMove:l,onMouseLeave:h,onClick:f,reconnectRadius:d,onDoubleClick:c,onReconnectStart:g,onReconnectEnd:m,rfId:n,onError:u,edgeTypes:o,disableKeyboardA11y:p},E))]})}To.displayName="EdgeRenderer";const Ea=N.memo(To),va=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Na({children:e}){const t=J(va);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Sa(e){const t=Ht(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Ca=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Ma(e){const t=J(Ca),n=ne();return N.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Ia(e){return e.connection.inProgress?{...e.connection,to:ze(e.connection.to,e.transform)}:{...e.connection}}function ka(e){return Ia}function Aa(e){const t=ka();return J(t,oe)}const Pa=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function $a({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:s,width:r,height:i,isValid:a,inProgress:l}=J(Pa,oe);return!(r&&s&&l)?null:v.jsx("svg",{style:e,width:r,height:i,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:re(["react-flow__connection",Dn(a)]),children:v.jsx(Bo,{style:t,type:n,CustomComponent:o,isValid:a})})})}const Bo=({style:e,type:t=ge.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:s,from:r,fromNode:i,fromHandle:a,fromPosition:l,to:h,toNode:f,toHandle:d,toPosition:c}=Aa();if(!s)return;if(n)return v.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:a,fromX:r.x,fromY:r.y,toX:h.x,toY:h.y,fromPosition:l,toPosition:c,connectionStatus:Dn(o),toNode:f,toHandle:d});let g="";const m={sourceX:r.x,sourceY:r.y,sourcePosition:l,targetX:h.x,targetY:h.y,targetPosition:c};switch(t){case ge.Bezier:[g]=Zn(m);break;case ge.SimpleBezier:[g]=Co(m);break;case ge.Step:[g]=Et({...m,borderRadius:0});break;case ge.SmoothStep:[g]=Et(m);break;default:[g]=qn(m)}return v.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};Bo.displayName="ConnectionLine";const _a={};function kn(e=_a){N.useRef(e),ne(),N.useEffect(()=>{},[e])}function La(){ne(),N.useRef(!1),N.useEffect(()=>{},[])}function Ro({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:r,onEdgeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:d,onSelectionStart:c,onSelectionEnd:g,connectionLineType:m,connectionLineStyle:p,connectionLineComponent:y,connectionLineContainerStyle:x,selectionKeyCode:b,selectionOnDrag:u,selectionMode:w,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:M,deleteKeyCode:S,onlyRenderVisibleElements:_,elementsSelectable:R,defaultViewport:k,translateExtent:A,minZoom:P,maxZoom:L,preventScrolling:H,defaultMarkerColor:j,zoomOnScroll:$,zoomOnPinch:T,panOnScroll:I,panOnScrollSpeed:B,panOnScrollMode:D,zoomOnDoubleClick:z,panOnDrag:Y,onPaneClick:O,onPaneMouseEnter:q,onPaneMouseMove:K,onPaneMouseLeave:U,onPaneScroll:V,onPaneContextMenu:G,paneClickDistance:ee,nodeClickDistance:Q,onEdgeContextMenu:X,onEdgeMouseEnter:Z,onEdgeMouseMove:W,onEdgeMouseLeave:te,reconnectRadius:se,onReconnect:le,onReconnectStart:xe,onReconnectEnd:Ve,noDragClassName:Fe,noWheelClassName:Ye,noPanClassName:ke,disableKeyboardA11y:Ae,nodeExtent:ut,rfId:Oe,viewport:we,onViewportChange:Pe}){return kn(e),kn(t),La(),Sa(n),Ma(we),v.jsx(Ui,{onPaneClick:O,onPaneMouseEnter:q,onPaneMouseMove:K,onPaneMouseLeave:U,onPaneContextMenu:G,onPaneScroll:V,paneClickDistance:ee,deleteKeyCode:S,selectionKeyCode:b,selectionOnDrag:u,selectionMode:w,onSelectionStart:c,onSelectionEnd:g,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:M,elementsSelectable:R,zoomOnScroll:$,zoomOnPinch:T,zoomOnDoubleClick:z,panOnScroll:I,panOnScrollSpeed:B,panOnScrollMode:D,panOnDrag:Y,defaultViewport:k,translateExtent:A,minZoom:P,maxZoom:L,onSelectionContextMenu:d,preventScrolling:H,noDragClassName:Fe,noWheelClassName:Ye,noPanClassName:ke,disableKeyboardA11y:Ae,onViewportChange:Pe,isControlledViewport:!!we,children:v.jsxs(Na,{children:[v.jsx(Ea,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:i,onReconnect:le,onReconnectStart:xe,onReconnectEnd:Ve,onlyRenderVisibleElements:_,onEdgeContextMenu:X,onEdgeMouseEnter:Z,onEdgeMouseMove:W,onEdgeMouseLeave:te,reconnectRadius:se,defaultMarkerColor:j,noPanClassName:ke,disableKeyboardA11y:Ae,rfId:Oe}),v.jsx($a,{style:p,type:m,component:y,containerStyle:x}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(sa,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:r,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:h,onNodeContextMenu:f,nodeClickDistance:Q,onlyRenderVisibleElements:_,noPanClassName:ke,noDragClassName:Fe,disableKeyboardA11y:Ae,nodeExtent:ut,rfId:Oe}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ro.displayName="GraphView";const Ha=N.memo(Ro),An=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:s,height:r,fitView:i,fitViewOptions:a,minZoom:l=.5,maxZoom:h=2,nodeOrigin:f,nodeExtent:d}={})=>{const c=new Map,g=new Map,m=new Map,p=new Map,y=o??t??[],x=n??e??[],b=f??[0,0],u=d??Le;Jn(m,p,y);const w=Nt(x,c,g,{nodeOrigin:b,nodeExtent:u,elevateNodesOnSelect:!1});let E=[0,0,1];if(i&&s&&r){const C=Re(c,{filter:R=>!!((R.width||R.initialWidth)&&(R.height||R.initialHeight))}),{x:M,y:S,zoom:_}=kt(C,s,r,l,h,(a==null?void 0:a.padding)??.1);E=[M,S,_]}return{rfId:"1",width:0,height:0,transform:E,nodes:x,nodesInitialized:w,nodeLookup:c,parentLookup:g,edges:y,edgeLookup:p,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:l,maxZoom:h,translateExtent:Le,nodeExtent:u,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ne.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:i??!1,fitViewOptions:a,fitViewResolver:null,connection:{...jn},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:ur,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Hn}},ja=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:s,height:r,fitView:i,fitViewOptions:a,minZoom:l,maxZoom:h,nodeOrigin:f,nodeExtent:d})=>qs((c,g)=>{async function m(){const{nodeLookup:p,panZoom:y,fitViewOptions:x,fitViewResolver:b,width:u,height:w,minZoom:E,maxZoom:C}=g();y&&(await lr({nodes:p,width:u,height:w,panZoom:y,minZoom:E,maxZoom:C},x),b==null||b.resolve(!0),c({fitViewResolver:null}))}return{...An({nodes:e,edges:t,width:s,height:r,fitView:i,fitViewOptions:a,minZoom:l,maxZoom:h,nodeOrigin:f,nodeExtent:d,defaultNodes:n,defaultEdges:o}),setNodes:p=>{const{nodeLookup:y,parentLookup:x,nodeOrigin:b,elevateNodesOnSelect:u,fitViewQueued:w}=g(),E=Nt(p,y,x,{nodeOrigin:b,nodeExtent:d,elevateNodesOnSelect:u,checkEquality:!0});w&&E?(m(),c({nodes:p,nodesInitialized:E,fitViewQueued:!1,fitViewOptions:void 0})):c({nodes:p,nodesInitialized:E})},setEdges:p=>{const{connectionLookup:y,edgeLookup:x}=g();Jn(y,x,p),c({edges:p})},setDefaultNodesAndEdges:(p,y)=>{if(p){const{setNodes:x}=g();x(p),c({hasDefaultNodes:!0})}if(y){const{setEdges:x}=g();x(y),c({hasDefaultEdges:!0})}},updateNodeInternals:p=>{const{triggerNodeChanges:y,nodeLookup:x,parentLookup:b,domNode:u,nodeOrigin:w,nodeExtent:E,debug:C,fitViewQueued:M}=g(),{changes:S,updatedInternals:_}=Pr(p,x,b,u,w,E);_&&(Ir(x,b,{nodeOrigin:w,nodeExtent:E}),M?(m(),c({fitViewQueued:!1,fitViewOptions:void 0})):c({}),(S==null?void 0:S.length)>0&&(C&&console.log("React Flow: trigger node changes",S),y==null||y(S)))},updateNodePositions:(p,y=!1)=>{const x=[],b=[],{nodeLookup:u,triggerNodeChanges:w}=g();for(const[E,C]of p){const M=u.get(E),S=!!(M!=null&&M.expandParent&&(M!=null&&M.parentId)&&(C!=null&&C.position)),_={id:E,type:"position",position:S?{x:Math.max(0,C.position.x),y:Math.max(0,C.position.y)}:C.position,dragging:y};S&&M.parentId&&x.push({id:E,parentId:M.parentId,rect:{...C.internals.positionAbsolute,width:C.measured.width??0,height:C.measured.height??0}}),b.push(_)}if(x.length>0){const{parentLookup:E,nodeOrigin:C}=g(),M=Lt(x,u,E,C);b.push(...M)}w(b)},triggerNodeChanges:p=>{const{onNodesChange:y,setNodes:x,nodes:b,hasDefaultNodes:u,debug:w}=g();if(p!=null&&p.length){if(u){const E=ho(p,b);x(E)}w&&console.log("React Flow: trigger node changes",p),y==null||y(p)}},triggerEdgeChanges:p=>{const{onEdgesChange:y,setEdges:x,edges:b,hasDefaultEdges:u,debug:w}=g();if(p!=null&&p.length){if(u){const E=po(p,b);x(E)}w&&console.log("React Flow: trigger edge changes",p),y==null||y(p)}},addSelectedNodes:p=>{const{multiSelectionActive:y,edgeLookup:x,nodeLookup:b,triggerNodeChanges:u,triggerEdgeChanges:w}=g();if(y){const E=p.map(C=>pe(C,!0));u(E);return}u(ve(b,new Set([...p]),!0)),w(ve(x))},addSelectedEdges:p=>{const{multiSelectionActive:y,edgeLookup:x,nodeLookup:b,triggerNodeChanges:u,triggerEdgeChanges:w}=g();if(y){const E=p.map(C=>pe(C,!0));w(E);return}w(ve(x,new Set([...p]))),u(ve(b,new Set,!0))},unselectNodesAndEdges:({nodes:p,edges:y}={})=>{const{edges:x,nodes:b,nodeLookup:u,triggerNodeChanges:w,triggerEdgeChanges:E}=g(),C=p||b,M=y||x,S=C.map(R=>{const k=u.get(R.id);return k&&(k.selected=!1),pe(R.id,!1)}),_=M.map(R=>pe(R.id,!1));w(S),E(_)},setMinZoom:p=>{const{panZoom:y,maxZoom:x}=g();y==null||y.setScaleExtent([p,x]),c({minZoom:p})},setMaxZoom:p=>{const{panZoom:y,minZoom:x}=g();y==null||y.setScaleExtent([x,p]),c({maxZoom:p})},setTranslateExtent:p=>{var y;(y=g().panZoom)==null||y.setTranslateExtent(p),c({translateExtent:p})},setPaneClickDistance:p=>{var y;(y=g().panZoom)==null||y.setClickDistance(p)},resetSelectedElements:()=>{const{edges:p,nodes:y,triggerNodeChanges:x,triggerEdgeChanges:b,elementsSelectable:u}=g();if(!u)return;const w=y.reduce((C,M)=>M.selected?[...C,pe(M.id,!1)]:C,[]),E=p.reduce((C,M)=>M.selected?[...C,pe(M.id,!1)]:C,[]);x(w),b(E)},setNodeExtent:p=>{const{nodes:y,nodeLookup:x,parentLookup:b,nodeOrigin:u,elevateNodesOnSelect:w,nodeExtent:E}=g();p[0][0]===E[0][0]&&p[0][1]===E[0][1]&&p[1][0]===E[1][0]&&p[1][1]===E[1][1]||(Nt(y,x,b,{nodeOrigin:u,nodeExtent:p,elevateNodesOnSelect:w,checkEquality:!1}),c({nodeExtent:p}))},panBy:p=>{const{transform:y,width:x,height:b,panZoom:u,translateExtent:w}=g();return $r({delta:p,panZoom:u,transform:y,translateExtent:w,width:x,height:b})},setCenter:async(p,y,x)=>{const{width:b,height:u,maxZoom:w,panZoom:E}=g();if(!E)return Promise.resolve(!1);const C=typeof(x==null?void 0:x.zoom)<"u"?x.zoom:w;return await E.setViewport({x:b/2-p*C,y:u/2-y*C,zoom:C},{duration:x==null?void 0:x.duration,ease:x==null?void 0:x.ease,interpolate:x==null?void 0:x.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{c({connection:{...jn}})},updateConnection:p=>{c({connection:p})},reset:()=>c({...An()})}},Object.is);function Da({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:s,initialHeight:r,initialMinZoom:i,initialMaxZoom:a,initialFitViewOptions:l,fitView:h,nodeOrigin:f,nodeExtent:d,children:c}){const[g]=N.useState(()=>ja({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:s,height:r,fitView:h,minZoom:i,maxZoom:a,fitViewOptions:l,nodeOrigin:f,nodeExtent:d}));return v.jsx(ni,{value:g,children:v.jsx(Ci,{children:c})})}function Ta({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:s,width:r,height:i,fitView:a,fitViewOptions:l,minZoom:h,maxZoom:f,nodeOrigin:d,nodeExtent:c}){return N.useContext(at)?v.jsx(v.Fragment,{children:e}):v.jsx(Da,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:s,initialWidth:r,initialHeight:i,fitView:a,initialFitViewOptions:l,initialMinZoom:h,initialMaxZoom:f,nodeOrigin:d,nodeExtent:c,children:e})}const Ba={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Ra({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:s,nodeTypes:r,edgeTypes:i,onNodeClick:a,onEdgeClick:l,onInit:h,onMove:f,onMoveStart:d,onMoveEnd:c,onConnect:g,onConnectStart:m,onConnectEnd:p,onClickConnectStart:y,onClickConnectEnd:x,onNodeMouseEnter:b,onNodeMouseMove:u,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:C,onNodeDragStart:M,onNodeDrag:S,onNodeDragStop:_,onNodesDelete:R,onEdgesDelete:k,onDelete:A,onSelectionChange:P,onSelectionDragStart:L,onSelectionDrag:H,onSelectionDragStop:j,onSelectionContextMenu:$,onSelectionStart:T,onSelectionEnd:I,onBeforeDelete:B,connectionMode:D,connectionLineType:z=ge.Bezier,connectionLineStyle:Y,connectionLineComponent:O,connectionLineContainerStyle:q,deleteKeyCode:K="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:V=!1,selectionMode:G=He.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:Q=Je()?"Meta":"Control",zoomActivationKeyCode:X=Je()?"Meta":"Control",snapToGrid:Z,snapGrid:W,onlyRenderVisibleElements:te=!1,selectNodesOnDrag:se,nodesDraggable:le,autoPanOnNodeFocus:xe,nodesConnectable:Ve,nodesFocusable:Fe,nodeOrigin:Ye=fo,edgesFocusable:ke,edgesReconnectable:Ae,elementsSelectable:ut=!0,defaultViewport:Oe=pi,minZoom:we=.5,maxZoom:Pe=2,translateExtent:Dt=Le,preventScrolling:Yo=!0,nodeExtent:ft,defaultMarkerColor:Oo="#b1b1b7",zoomOnScroll:Xo=!0,zoomOnPinch:Wo=!0,panOnScroll:Go=!1,panOnScrollSpeed:Zo=.5,panOnScrollMode:Ko=me.Free,zoomOnDoubleClick:Uo=!0,panOnDrag:qo=!0,onPaneClick:Qo,onPaneMouseEnter:Jo,onPaneMouseMove:es,onPaneMouseLeave:ts,onPaneScroll:ns,onPaneContextMenu:os,paneClickDistance:Tt=0,nodeClickDistance:ss=0,children:rs,onReconnect:is,onReconnectStart:as,onReconnectEnd:cs,onEdgeContextMenu:ls,onEdgeDoubleClick:ds,onEdgeMouseEnter:us,onEdgeMouseMove:fs,onEdgeMouseLeave:gs,reconnectRadius:hs=10,onNodesChange:ps,onEdgesChange:ms,noDragClassName:ys="nodrag",noWheelClassName:xs="nowheel",noPanClassName:Bt="nopan",fitView:Rt,fitViewOptions:zt,connectOnClick:ws,attributionPosition:bs,proOptions:Es,defaultEdgeOptions:vs,elevateNodesOnSelect:Ns,elevateEdgesOnSelect:Ss,disableKeyboardA11y:Vt=!1,autoPanOnConnect:Cs,autoPanOnNodeDrag:Ms,autoPanSpeed:Is,connectionRadius:ks,isValidConnection:As,onError:Ps,style:$s,id:Ft,nodeDragThreshold:_s,connectionDragThreshold:Ls,viewport:Hs,onViewportChange:js,width:Ds,height:Ts,colorMode:Bs="light",debug:Rs,onScroll:Xe,ariaLabelConfig:zs,...Vs},Fs){const gt=Ft||"1",Ys=wi(Bs),Os=N.useCallback(Yt=>{Yt.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Xe==null||Xe(Yt)},[Xe]);return v.jsx("div",{"data-testid":"rf__wrapper",...Vs,onScroll:Os,style:{...$s,...Ba},ref:Fs,className:re(["react-flow",s,Ys]),id:Ft,role:"application",children:v.jsxs(Ta,{nodes:e,edges:t,width:Ds,height:Ts,fitView:Rt,fitViewOptions:zt,minZoom:we,maxZoom:Pe,nodeOrigin:Ye,nodeExtent:ft,children:[v.jsx(Ha,{onInit:h,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:b,onNodeMouseMove:u,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:C,nodeTypes:r,edgeTypes:i,connectionLineType:z,connectionLineStyle:Y,connectionLineComponent:O,connectionLineContainerStyle:q,selectionKeyCode:U,selectionOnDrag:V,selectionMode:G,deleteKeyCode:K,multiSelectionKeyCode:Q,panActivationKeyCode:ee,zoomActivationKeyCode:X,onlyRenderVisibleElements:te,defaultViewport:Oe,translateExtent:Dt,minZoom:we,maxZoom:Pe,preventScrolling:Yo,zoomOnScroll:Xo,zoomOnPinch:Wo,zoomOnDoubleClick:Uo,panOnScroll:Go,panOnScrollSpeed:Zo,panOnScrollMode:Ko,panOnDrag:qo,onPaneClick:Qo,onPaneMouseEnter:Jo,onPaneMouseMove:es,onPaneMouseLeave:ts,onPaneScroll:ns,onPaneContextMenu:os,paneClickDistance:Tt,nodeClickDistance:ss,onSelectionContextMenu:$,onSelectionStart:T,onSelectionEnd:I,onReconnect:is,onReconnectStart:as,onReconnectEnd:cs,onEdgeContextMenu:ls,onEdgeDoubleClick:ds,onEdgeMouseEnter:us,onEdgeMouseMove:fs,onEdgeMouseLeave:gs,reconnectRadius:hs,defaultMarkerColor:Oo,noDragClassName:ys,noWheelClassName:xs,noPanClassName:Bt,rfId:gt,disableKeyboardA11y:Vt,nodeExtent:ft,viewport:Hs,onViewportChange:js}),v.jsx(xi,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:g,onConnectStart:m,onConnectEnd:p,onClickConnectStart:y,onClickConnectEnd:x,nodesDraggable:le,autoPanOnNodeFocus:xe,nodesConnectable:Ve,nodesFocusable:Fe,edgesFocusable:ke,edgesReconnectable:Ae,elementsSelectable:ut,elevateNodesOnSelect:Ns,elevateEdgesOnSelect:Ss,minZoom:we,maxZoom:Pe,nodeExtent:ft,onNodesChange:ps,onEdgesChange:ms,snapToGrid:Z,snapGrid:W,connectionMode:D,translateExtent:Dt,connectOnClick:ws,defaultEdgeOptions:vs,fitView:Rt,fitViewOptions:zt,onNodesDelete:R,onEdgesDelete:k,onDelete:A,onNodeDragStart:M,onNodeDrag:S,onNodeDragStop:_,onSelectionDrag:H,onSelectionDragStart:L,onSelectionDragStop:j,onMove:f,onMoveStart:d,onMoveEnd:c,noPanClassName:Bt,nodeOrigin:Ye,rfId:gt,autoPanOnConnect:Cs,autoPanOnNodeDrag:Ms,autoPanSpeed:Is,onError:Ps,connectionRadius:ks,isValidConnection:As,selectNodesOnDrag:se,nodeDragThreshold:_s,connectionDragThreshold:Ls,onBeforeDelete:B,paneClickDistance:Tt,debug:Rs,ariaLabelConfig:zs}),v.jsx(hi,{onSelectionChange:P}),rs,v.jsx(li,{proOptions:Es,position:bs}),v.jsx(ci,{rfId:gt,disableKeyboardA11y:Vt})]})})}var za=mo(Ra);function Va({dimensions:e,lineWidth:t,variant:n,className:o}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:re(["react-flow__background-pattern",n,o])})}function Fa({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:re(["react-flow__background-pattern","dots",t])})}var he;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(he||(he={}));const Ya={[he.Dots]:1,[he.Lines]:1,[he.Cross]:6},Oa=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function zo({id:e,variant:t=he.Dots,gap:n=20,size:o,lineWidth:s=1,offset:r=0,color:i,bgColor:a,style:l,className:h,patternClassName:f}){const d=N.useRef(null),{transform:c,patternId:g}=J(Oa,oe),m=o||Ya[t],p=t===he.Dots,y=t===he.Cross,x=Array.isArray(n)?n:[n,n],b=[x[0]*c[2]||1,x[1]*c[2]||1],u=m*c[2],w=Array.isArray(r)?r:[r,r],E=y?[u,u]:b,C=[w[0]*c[2]||1+E[0]/2,w[1]*c[2]||1+E[1]/2],M=`${g}${e||""}`;return v.jsxs("svg",{className:re(["react-flow__background",h]),style:{...l,...lt,"--xy-background-color-props":a,"--xy-background-pattern-color-props":i},ref:d,"data-testid":"rf__background",children:[v.jsx("pattern",{id:M,x:c[0]%b[0],y:c[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:p?v.jsx(Fa,{radius:u/2,className:f}):v.jsx(Va,{dimensions:E,lineWidth:s,variant:t,className:f})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}zo.displayName="Background";const Xa=N.memo(zo);function Wa(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Ga(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Za(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Ka(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ua(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ke({children:e,className:t,...n}){return v.jsx("button",{type:"button",className:re(["react-flow__controls-button",t]),...n,children:e})}const qa=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Vo({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:r,onZoomOut:i,onFitView:a,onInteractiveChange:l,className:h,children:f,position:d="bottom-left",orientation:c="vertical","aria-label":g}){const m=ne(),{isInteractive:p,minZoomReached:y,maxZoomReached:x,ariaLabelConfig:b}=J(qa,oe),{zoomIn:u,zoomOut:w,fitView:E}=Ht(),C=()=>{u(),r==null||r()},M=()=>{w(),i==null||i()},S=()=>{E(s),a==null||a()},_=()=>{m.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),l==null||l(!p)},R=c==="horizontal"?"horizontal":"vertical";return v.jsxs(ct,{className:re(["react-flow__controls",R,h]),position:d,style:e,"data-testid":"rf__controls","aria-label":g??b["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(Ke,{onClick:C,className:"react-flow__controls-zoomin",title:b["controls.zoomIn.ariaLabel"],"aria-label":b["controls.zoomIn.ariaLabel"],disabled:x,children:v.jsx(Wa,{})}),v.jsx(Ke,{onClick:M,className:"react-flow__controls-zoomout",title:b["controls.zoomOut.ariaLabel"],"aria-label":b["controls.zoomOut.ariaLabel"],disabled:y,children:v.jsx(Ga,{})})]}),n&&v.jsx(Ke,{className:"react-flow__controls-fitview",onClick:S,title:b["controls.fitView.ariaLabel"],"aria-label":b["controls.fitView.ariaLabel"],children:v.jsx(Za,{})}),o&&v.jsx(Ke,{className:"react-flow__controls-interactive",onClick:_,title:b["controls.interactive.ariaLabel"],"aria-label":b["controls.interactive.ariaLabel"],children:p?v.jsx(Ua,{}):v.jsx(Ka,{})}),f]})}Vo.displayName="Controls";const Qa=N.memo(Vo);function Ja({id:e,x:t,y:n,width:o,height:s,style:r,color:i,strokeColor:a,strokeWidth:l,className:h,borderRadius:f,shapeRendering:d,selected:c,onClick:g}){const{background:m,backgroundColor:p}=r||{},y=i||m||p;return v.jsx("rect",{className:re(["react-flow__minimap-node",{selected:c},h]),x:t,y:n,rx:f,ry:f,width:o,height:s,style:{fill:y,stroke:a,strokeWidth:l},shapeRendering:d,onClick:g?x=>g(x,e):void 0})}const ec=N.memo(Ja),tc=e=>e.nodes.map(t=>t.id),wt=e=>e instanceof Function?e:()=>e;function nc({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:r=ec,onClick:i}){const a=J(tc,oe),l=wt(t),h=wt(e),f=wt(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:a.map(c=>v.jsx(sc,{id:c,nodeColorFunc:l,nodeStrokeColorFunc:h,nodeClassNameFunc:f,nodeBorderRadius:o,nodeStrokeWidth:s,NodeComponent:r,onClick:i,shapeRendering:d},c))})}function oc({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:s,nodeStrokeWidth:r,shapeRendering:i,NodeComponent:a,onClick:l}){const{node:h,x:f,y:d,width:c,height:g}=J(m=>{const{internals:p}=m.nodeLookup.get(e),y=p.userNode,{x,y:b}=p.positionAbsolute,{width:u,height:w}=de(y);return{node:y,x,y:b,width:u,height:w}},oe);return!h||h.hidden||!Fn(h)?null:v.jsx(a,{x:f,y:d,width:c,height:g,style:h.style,selected:!!h.selected,className:o(h),color:t(h),borderRadius:s,strokeColor:n(h),strokeWidth:r,shapeRendering:i,onClick:l,id:h.id})}const sc=N.memo(oc);var rc=N.memo(nc);const ic=200,ac=150,cc=e=>!e.hidden,lc=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Vn(Re(e.nodeLookup,{filter:cc}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},dc="react-flow__minimap-desc";function Fo({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:s="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a,bgColor:l,maskColor:h,maskStrokeColor:f,maskStrokeWidth:d,position:c="bottom-right",onClick:g,onNodeClick:m,pannable:p=!1,zoomable:y=!1,ariaLabel:x,inversePan:b,zoomStep:u=10,offsetScale:w=5}){const E=ne(),C=N.useRef(null),{boundingRect:M,viewBB:S,rfId:_,panZoom:R,translateExtent:k,flowWidth:A,flowHeight:P,ariaLabelConfig:L}=J(lc,oe),H=(e==null?void 0:e.width)??ic,j=(e==null?void 0:e.height)??ac,$=M.width/H,T=M.height/j,I=Math.max($,T),B=I*H,D=I*j,z=w*I,Y=M.x-(B-M.width)/2-z,O=M.y-(D-M.height)/2-z,q=B+z*2,K=D+z*2,U=`${dc}-${_}`,V=N.useRef(0),G=N.useRef();V.current=I,N.useEffect(()=>{if(C.current&&R)return G.current=Rr({domNode:C.current,panZoom:R,getTransform:()=>E.getState().transform,getViewScale:()=>V.current}),()=>{var Z;(Z=G.current)==null||Z.destroy()}},[R]),N.useEffect(()=>{var Z;(Z=G.current)==null||Z.update({translateExtent:k,width:A,height:P,inversePan:b,pannable:p,zoomStep:u,zoomable:y})},[p,y,b,u,k,A,P]);const ee=g?Z=>{var se;const[W,te]=((se=G.current)==null?void 0:se.pointer(Z))||[0,0];g(Z,{x:W,y:te})}:void 0,Q=m?N.useCallback((Z,W)=>{const te=E.getState().nodeLookup.get(W).internals.userNode;m(Z,te)},[]):void 0,X=x??L["minimap.ariaLabel"];return v.jsx(ct,{position:c,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*I:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="number"?i:void 0},className:re(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:H,height:j,viewBox:`${Y} ${O} ${q} ${K}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":U,ref:C,onClick:ee,children:[X&&v.jsx("title",{id:U,children:X}),v.jsx(rc,{onClick:Q,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:r,nodeClassName:s,nodeStrokeWidth:i,nodeComponent:a}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${Y-z},${O-z}h${q+z*2}v${K+z*2}h${-q-z*2}z
        M${S.x},${S.y}h${S.width}v${S.height}h${-S.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Fo.displayName="MiniMap";N.memo(Fo);const uc=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,fc={[Ie.Line]:"right",[Ie.Handle]:"bottom-right"};function gc({nodeId:e,position:t,variant:n=Ie.Handle,className:o,style:s=void 0,children:r,color:i,minWidth:a=10,minHeight:l=10,maxWidth:h=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:c,autoScale:g=!0,shouldResize:m,onResizeStart:p,onResize:y,onResizeEnd:x}){const b=bo(),u=typeof e=="string"?e:b,w=ne(),E=N.useRef(null),C=n===Ie.Handle,M=J(N.useCallback(uc(C&&g),[C,g]),oe),S=N.useRef(null),_=t??fc[n];N.useEffect(()=>{if(!(!E.current||!u))return S.current||(S.current=ti({domNode:E.current,nodeId:u,getStoreItems:()=>{const{nodeLookup:k,transform:A,snapGrid:P,snapToGrid:L,nodeOrigin:H,domNode:j}=w.getState();return{nodeLookup:k,transform:A,snapGrid:P,snapToGrid:L,nodeOrigin:H,paneDomNode:j}},onChange:(k,A)=>{const{triggerNodeChanges:P,nodeLookup:L,parentLookup:H,nodeOrigin:j}=w.getState(),$=[],T={x:k.x,y:k.y},I=L.get(u);if(I&&I.expandParent&&I.parentId){const B=I.origin??j,D=k.width??I.measured.width??0,z=k.height??I.measured.height??0,Y={id:I.id,parentId:I.parentId,rect:{width:D,height:z,...Yn({x:k.x??I.position.x,y:k.y??I.position.y},{width:D,height:z},I.parentId,L,B)}},O=Lt([Y],L,H,j);$.push(...O),T.x=k.x?Math.max(B[0]*D,k.x):void 0,T.y=k.y?Math.max(B[1]*z,k.y):void 0}if(T.x!==void 0&&T.y!==void 0){const B={id:u,type:"position",position:{...T}};$.push(B)}if(k.width!==void 0&&k.height!==void 0){const D={id:u,type:"dimensions",resizing:!0,setAttributes:c?c==="horizontal"?"width":"height":!0,dimensions:{width:k.width,height:k.height}};$.push(D)}for(const B of A){const D={...B,type:"position"};$.push(D)}P($)},onEnd:({width:k,height:A})=>{const P={id:u,type:"dimensions",resizing:!1,dimensions:{width:k,height:A}};w.getState().triggerNodeChanges([P])}})),S.current.update({controlPosition:_,boundaries:{minWidth:a,minHeight:l,maxWidth:h,maxHeight:f},keepAspectRatio:d,resizeDirection:c,onResizeStart:p,onResize:y,onResizeEnd:x,shouldResize:m}),()=>{var k;(k=S.current)==null||k.destroy()}},[_,a,l,h,f,d,p,y,x,m]);const R=_.split("-");return v.jsx("div",{className:re(["react-flow__resize-control","nodrag",...R,n,o]),ref:E,style:{...s,scale:M,...i&&{[C?"backgroundColor":"borderColor"]:i}},children:r})}N.memo(gc);const hc=[{id:"n1",position:{x:0,y:0},data:{label:"Node 1"},type:"courseNode"},{id:"n2",position:{x:0,y:100},data:{label:"Node 2"}}],pc=[{id:"n1-n2",source:"n1",target:"n2"}],mc={courseNode:Qs};function yc(){const[e,t]=N.useState(hc),[n,o]=N.useState(pc),s=N.useCallback(a=>t(l=>ho(a,l)),[]),r=N.useCallback(a=>o(l=>po(a,l)),[]),i=N.useCallback(a=>o(l=>Un(a,l)),[]);return React.createElement("div",{style:{width:"100vw",height:"100vh"}},React.createElement(za,{nodes:e,edges:n,onNodesChange:s,onEdgesChange:r,onConnect:i,fitView:!0,nodeTypes:mc},React.createElement(Xa,null),React.createElement(Qa,null)))}const xc=[{title:"Dashboard",href:"/dashboard"}];function kc(){return React.createElement(Js,{breadcrumbs:xc},React.createElement(Xs,{title:"Dashboard"}),React.createElement("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},React.createElement(yc,null)))}export{kc as default};
